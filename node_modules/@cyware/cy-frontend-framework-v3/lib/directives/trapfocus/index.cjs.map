{"version":3,"file":"index.cjs","sources":["../../../src/directives/trapfocus/index.js"],"sourcesContent":["import Dialog from \"./model\";\nlet dialogInstance = new Map();\nfunction resetInstance(id) {\n  const currInstance = dialogInstance.get(id);\n  currInstance?.close();\n  dialogInstance.delete(id);\n}\nconst getAttribute = (element, key, equateValue = \"true\") => {\n  return element?.getAttribute(key, false) === equateValue;\n};\n\nfunction initInstance(el, binding, vNode) {\n  const activeKey = getAttribute(el, \"cy-modal-key\");\n  const { hide: esc } = binding?.instance;\n  const { uid: id } = vNode?.ctx;\n  const idExists = dialogInstance.has(id);\n  if (activeKey && idExists) return;\n  if (activeKey) {\n    const disableEsc = getAttribute(el, \"hide-on-esc\", \"false\");\n    if (!disableEsc && esc && typeof esc === \"function\")\n      binding.value = {\n        ...binding.value,\n        keyEvents: { esc, ...(binding.value?.keyEvents || {}) }\n      };\n    dialogInstance.set(\n      id,\n      new Dialog(el, document.activeElement, binding.value || {})\n    );\n  } else if (!activeKey && idExists) resetInstance(id);\n}\n\nexport default {\n  beforeMount: (el, binding, vNode) => {\n    initInstance(el, binding, vNode);\n  },\n  updated: (el, binding, vNode) => {\n    initInstance(el, binding, vNode);\n  },\n  unmounted: (el, binding, vNode) => {\n    const { uid: id } = vNode?.ctx;\n    if (dialogInstance.has(id)) resetInstance(id);\n  }\n};\n"],"names":["dialogInstance","resetInstance","id","getAttribute","element","key","equateValue","initInstance","el","binding","vNode","activeKey","esc","idExists","Dialog","TrapFocus"],"mappings":"2IACA,IAAIA,EAAiB,IAAI,IACzB,SAASC,EAAcC,EAAI,CACJF,EAAe,IAAIE,CAAE,GAC5B,MAAK,EACnBF,EAAe,OAAOE,CAAE,CAC1B,CACA,MAAMC,EAAe,CAACC,EAASC,EAAKC,EAAc,SACzCF,GAAS,aAAaC,EAAK,EAAK,IAAMC,EAG/C,SAASC,EAAaC,EAAIC,EAASC,EAAO,CACxC,MAAMC,EAAYR,EAAaK,EAAI,cAAc,EAC3C,CAAE,KAAMI,GAAQH,GAAS,SACzB,CAAE,IAAKP,GAAOQ,GAAO,IACrBG,EAAWb,EAAe,IAAIE,CAAE,EAClCS,GAAaE,IACbF,GAEE,CADeR,EAAaK,EAAI,cAAe,OAAO,GACvCI,GAAO,OAAOA,GAAQ,aACvCH,EAAQ,MAAQ,CACd,GAAGA,EAAQ,MACX,UAAW,CAAE,IAAAG,EAAK,GAAIH,EAAQ,OAAO,WAAa,CAAA,CAAK,CAC/D,GACIT,EAAe,IACbE,EACA,IAAIY,EAAAA,QAAON,EAAI,SAAS,cAAeC,EAAQ,OAAS,EAAE,CAChE,GACa,CAACE,GAAaE,GAAUZ,EAAcC,CAAE,EACrD,CAEA,MAAea,EAAA,CACb,YAAa,CAACP,EAAIC,EAASC,IAAU,CACnCH,EAAaC,EAAIC,EAASC,CAAK,CAChC,EACD,QAAS,CAACF,EAAIC,EAASC,IAAU,CAC/BH,EAAaC,EAAIC,EAASC,CAAK,CAChC,EACD,UAAW,CAACF,EAAIC,EAASC,IAAU,CACjC,KAAM,CAAE,IAAKR,GAAOQ,GAAO,IACvBV,EAAe,IAAIE,CAAE,GAAGD,EAAcC,CAAE,CAC7C,CACH"}
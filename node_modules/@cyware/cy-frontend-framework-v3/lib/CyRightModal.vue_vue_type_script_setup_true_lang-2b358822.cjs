"use strict";const t=require("vue"),w=require("./CyButton.vue_vue_type_script_setup_true_lang-33e4d3d7.cjs"),g=require("./CyTooltip.vue_vue_type_script_setup_true_lang-f48e6aa4.cjs"),F=require("./directives/trapfocus/index.cjs"),H=require("./composables/useScrollMixin.cjs"),j=require("./composables/useDebounce.cjs"),m=require("./utilities/bind-attributes.cjs"),K=require("./components/right-modal/variables.cjs"),G=["aria-hidden"],J=["aria-label","cy-modal-key","aria-hidden"],Q=["tabindex"],U={class:"cyw-right-modal-header__icons cyw-list-unstyled cyw-m-0 cyw-flex"},X=t.defineComponent({name:"CyRightModal",inheritAttrs:!1,directives:{"cy-trapfocus":F.default},__name:"CyRightModal",props:{noCloseIcon:{type:Boolean,default:()=>!1},noExpandIcon:{type:Boolean,default:()=>!0},noMinimizeIcon:{type:Boolean,default:()=>!0},noHeader:{type:Boolean,default:()=>!1},value:{default:!1},config:{default:()=>({}),type:Object},backdropClose:{default:!1,type:Boolean},align:{default:"right",type:String},width:{default:"md",type:String},expandWidth:{default:"40",type:String},minimizeWidth:{default:"25rem",type:String},title:{default:"",type:String},modalBodyClass:{default:"",type:String},footerClass:{default:"",type:String},headerClass:{default:"",type:String},titleClass:{default:"",type:String},focusElement:{default:".cyw-modal-header__label",type:[HTMLElement,String]}},emits:["minimize","maximize","expand","collapse","open","close","input","closeTrigger"],setup(o,{expose:k,emit:B}){const i=o,{dynamicAttrs:S,addScrollListener:T,removeScrollListener:E,states:O}=H.useScrollMixin();t.provide("contextId",()=>O.componentId);const{initDebounce:N,removeDebounce:R}=j.useDebounce({triggers:{bodyOffset:{trigger:u,timer:500}}}),x=t.useSlots(),r=B,e=t.reactive({dataConfig:{...K.DATA_LABELS},componentRef:"modal",showModal:!1,focusAfterClosed:null,slotData:{},mutationObserver:null,resizeObserver:null,minTrans:!1,isOpened:!1,modalWidth:"40%",expand:!1,minMax:!1,widthMapping:t.reactive({xs:"30%",s:"35%",md:"50%",l:"65%",xl:"90%",full:"100%"})}),V=t.ref(),y=t.ref(),b=t.ref(),d=t.ref(),l=t.computed(()=>e.showModal&&!e.minMax?0:-1);t.onMounted(()=>{e.showModal=i.value,e.modalWidth=e.widthMapping[i.width],h()});function f(a){let{closeTrigger:n}=i.config;typeof n=="function"?n(e.showModal):n?r(n,a):p()}function v(){T(),$(),W()}function M(){E(),I(),D()}function $(){d.value&&(e.mutationObserver=new MutationObserver(a=>{for(const{type:n,target:c}of a)n==="childList"&&(z=>z?.tagName==="FOOTER"?z.getAttribute("cyw-modal-footer")==="true":!1)(c)&&(h(),t.nextTick(()=>u()))}),e.mutationObserver?.observe(d.value,{childList:!0,subtree:!0}))}function W(){d.value||(e.resizeObserver=new ResizeObserver(()=>{N("bodyOffset")}),e.resizeObserver?.observe(d.value))}function I(){R("bodyOffset")}function D(){e.mutationObserver?.disconnect(),e.mutationObserver=null}function P(){e.showModal?e.minMax&&e.showModal&&_():(h(),e.showModal=!0,e.modalWidth=e.widthMapping[i.width],u(),r("input",!0),r("open"),v())}function L(a){e.showModal&&a?.which===27&&f(e.showModal)}function u(){if(!e.showModal)return;const a=y.value?.getBoundingClientRect()?.height||0,n=y.value?.getBoundingClientRect()?.height||0;e.slotData.bodyOffset=`${a+n}px`}function h(){q(),e.slotData.footer=!!x?.["modal-footer"]?.()?.length}function q(){let a=(c,s)=>c||s.tag||s.text&&s.text.trim();const n=x?.["modal-title"]?.()?.reduce(a,!1);e.slotData.title=n}function A(){i.backdropClose&&p()}function p(){e.showModal&&(r("input",!1),r("close"),M(),e.showModal=!1,e.expand=!1,setTimeout(()=>{e.minMax=!1,e.minTrans=!1,e.modalWidth=e.widthMapping[i.width]},400))}function C(){e.expand=!e.expand,e.expand?r("expand"):r("collapse")}function _(){e.minMax=!e.minMax,e.minMax?(setTimeout(()=>e.minTrans=!0,200),e.modalWidth=i.minimizeWidth,r("minimize")):(e.minTrans=!1,e.modalWidth=e.widthMapping[i.width],r("maximize"))}return t.watch(()=>i.value,a=>{e.showModal=a,a?v():M()}),t.watch(()=>i.expandWidth,()=>{u()}),t.watch(()=>i.width,a=>{e.modalWidth=e.widthMapping[a]}),k({show:P,hide:p,handleKeyEvents:L}),(a,n)=>{const c=t.resolveDirective("cy-trapfocus");return t.openBlock(),t.createElementBlock("div",t.mergeProps({ref_key:"modalRef",ref:V,class:["cyw-right-modal cyw-w-100 cyw-position-fixed",{"cyw-right-modal--show":e.showModal,"cyw-right-modal__minimize-transition":!i.noMinimizeIcon&&e.minMax,"cyw-right-modal-container--expanded":e.expand,"cyw-right-modal__minimize":e.minMax,"cyw-right-modal__minimize-trans":e.minTrans}]},e.minMax&&e.minTrans?{style:{width:e.modalWidth}}:{}),[e.minMax?t.createCommentVNode("v-if",!0):(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["cyw-backdrop",{show:e.showModal}]),"aria-hidden":!e.showModal,onClick:A},null,10,G)),t.withDirectives((t.openBlock(),t.createElementBlock("section",t.mergeProps({class:"cyw-right-modal-container cyw-h-100 cyw-bg-N10 cyw-round-left-lg cyw-position-absolute",role:"dialog","aria-modal":"true","aria-label":i.title||a.$attrs["aria-label"],"cy-modal-key":e.showModal,"aria-hidden":!e.showModal},{...t.unref(S),...t.unref(m.generateTestId)(a.$attrs,"right-modal")},{ref_key:"contentRef",ref:b,class:{translate:e.showModal,"cyw-right-modal-container--expanded":e.expand&&!e.minMax,"cyw-right-modal-container--left":o.align==="left","cyw-shadow-200":e.minMax},style:{width:e.modalWidth}}),[t.renderSlot(a.$slots,"panel",{tabindex:l.value}),t.createElementVNode("section",{class:"cyw-right-modal-content cyw-position-relative cyw-flex-col",ref_key:"mainRef",ref:d},[t.renderSlot(a.$slots,"default",{tabindex:l.value},()=>[o.noHeader?t.createCommentVNode("v-if",!0):(t.openBlock(),t.createElementBlock("header",{key:0,class:t.normalizeClass(["cyw-right-modal-header cyw-flex-align-center",[o.headerClass,{"cyw-right-modal-header__minimized":e.minTrans}]]),ref_key:"headerRef",ref:y},[t.renderSlot(a.$slots,"modal-header",{},()=>[t.createElementVNode("h2",t.mergeProps({class:"cyw-right-modal-header__label cyw-text-regular cyw-text-f20 cyw-color-N800 cyw-flex-grow-1 cyw-tab-focus",tabindex:l.value},{...t.unref(m.generateTestId)(a.$attrs,"right-modal-title")},{class:[o.titleClass,{"cyw-flex-justify-center":e.expand&&!e.minMax,"cyw--right-modal-header__label--minimized":e.minMax}],style:{width:e.expand?o.expandWidth+"%":"auto"}}),[t.renderSlot(a.$slots,"modal-title",t.normalizeProps(t.guardReactiveProps({tabindex:l.value})),()=>[t.createTextVNode(t.toDisplayString(o.title),1)])],16,Q),t.createElementVNode("div",U,[t.renderSlot(a.$slots,"modal-icons",t.normalizeProps(t.guardReactiveProps({tabindex:l.value,close:f,toggleExpand:C}))),o.noMinimizeIcon?t.createCommentVNode("v-if",!0):(t.openBlock(),t.createBlock(w._sfc_main,t.mergeProps({key:0,type:"tertiary",class:"cyw-p-3 cyw-min-w-auto",subtype:"subtle",size:"sm"},{...t.unref(m.generateTestId)(a.$attrs,"right-modal-minmax")},{tabindex:l.value,"aria-label":e.minMax?e.dataConfig.minimize:e.dataConfig.maximize,onClick:_,"data-testaction":`slider-${e.minMax?"minimize":"maximize"}`}),{default:t.withCtx(()=>[t.createVNode(g._sfc_main,{content:e.minMax?e.dataConfig.maximize:e.dataConfig.minimize,placement:"top"},{default:t.withCtx(()=>[t.createElementVNode("span",{class:t.normalizeClass(e.minMax?"cyicon-maximize":"cyicon-minus")},null,2)]),_:1},8,["content"])]),_:1},16,["tabindex","aria-label","data-testaction"])),!o.noExpandIcon&&!e.minMax?(t.openBlock(),t.createBlock(w._sfc_main,t.mergeProps({key:1,type:"tertiary",subtype:"subtle",tabindex:l.value},{...t.unref(m.generateTestId)(a.$attrs,"right-modal-fs")},{class:"cyw-p-3 cyw-min-w-auto","aria-label":e.expand?e.dataConfig.collapse:e.dataConfig.expand,onClick:C,"data-testaction":`slider-${e.expand?"collapse":"expand"}`}),{default:t.withCtx(()=>[t.createVNode(g._sfc_main,{content:e.expand?e.dataConfig.collapse:e.dataConfig.expand,placement:"top"},{default:t.withCtx(()=>[t.createElementVNode("span",{class:t.normalizeClass(e.expand?"cyicon-full-screen-off":"cyicon-full-screen-on")},null,2)]),_:1},8,["content"])]),_:1},16,["tabindex","aria-label","data-testaction"])):t.createCommentVNode("v-if",!0),o.noCloseIcon?t.createCommentVNode("v-if",!0):(t.openBlock(),t.createBlock(w._sfc_main,t.mergeProps({key:2,type:"tertiary",class:"cyw-p-3 cyw-min-w-auto",subtype:"subtle","aria-label":e.dataConfig.close,tabindex:l.value,onClick:n[0]||(n[0]=s=>f(s))},{...o.config.closeBtnProps,...t.unref(m.generateTestId)(a.$attrs,"right-modal-close")},{"data-testaction":`slider-${e.showModal?"close":"open"}`}),{default:t.withCtx(()=>[t.createVNode(g._sfc_main,{content:e.dataConfig.close,placement:"top"},{default:t.withCtx(()=>n[1]||(n[1]=[t.createElementVNode("span",{class:"cyicon-cross"},null,-1)])),_:1},8,["content"])]),_:1},16,["aria-label","tabindex","data-testaction"]))])])],2)),t.createElementVNode("section",{class:t.normalizeClass(["cyw-right-modal-content__main cyw-flex-grow-1 cyw-overlay-scroll cyw-position-relative",[o.modalBodyClass,{"cyw-flex-justify-center":e.expand,"cyw-right-modal-content__main--minimize":e.minTrans}]]),ref_key:"contentRef",ref:b},[t.createElementVNode("div",{class:"cyw-h-100 cyw-right-modal-content__main-body",style:t.normalizeStyle({width:e.expand?o.expandWidth+"%":"100%"})},[t.renderSlot(a.$slots,"modal-content",t.normalizeProps(t.guardReactiveProps({tabindex:l.value,visible:e.showModal})))],4)],2),t.createElementVNode("footer",{class:t.normalizeClass(["cyw-right-modal-footer cyw-border-top-1",[o.footerClass,{"cyw-d-none":!e.slotData.footer||e.minTrans,"cyw-flex-justify-center":e.expand}]]),"cy-modal-footer":!0,ref:"footer"},[t.renderSlot(a.$slots,"modal-footer",{tabindex:l.value})],2)])],512)],16,J)),[[c,{focusFirst:o.focusElement,keyEvents:{esc:f},modalBodyElement:!0}]])],16)}}});exports._sfc_main=X;
//# sourceMappingURL=CyRightModal.vue_vue_type_script_setup_true_lang-2b358822.cjs.map

{"version":3,"file":"CyTextarea.vue_vue_type_script_setup_true_lang-4ae317da.cjs","sources":["../src/components/textarea/CyTextarea.vue?vue&type=script&setup=true&lang.ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderSlot as _renderSlot, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, mergeProps as _mergeProps, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = [\"id\"]\nconst _hoisted_2 = { key: 0 }\nconst _hoisted_3 = [\"disabled\", \"autofocus\", \"aria-label\", \"value\", \"required\"]\nconst _hoisted_4 = [\"id\"]\n\nimport { computed, ref, useAttrs, useSlots } from \"vue\";\nimport { vue3Focus } from \"../../directives/vue3-focus\";\nimport { uuId } from \"../../utilities/shared\";\nimport { generateTestId, bindCustomAttributes } from \"../../utilities/bind-attributes\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{\n  name: \"CyTextarea\",\n  inheritAttrs: false\n},\n  __name: 'CyTextarea',\n  props: {\n  modelValue: { default: \"\", type: String },\n  maxlength: { default: 0, type: Number },\n  maxRows: { default: null, type: [String, Number] },\n  rows: { default: null, type: [String, Number] },\n  disabled: { default: false, type: Boolean },\n  icon: { default: \"\", type: String },\n  name: { default: null, type: String },\n  autofocus: { default: false, type: Boolean },\n  height: { default: 15, type: [String, Number] },\n  maxHeight: { default: 15, type: [String, Number] },\n  autosize: { default: false, type: Boolean },\n  width: { default: null, type: [String, Number] },\n  label: { default: \"\", type: String },\n  placeholder: { default: null, type: String },\n  className: { default: \"\", type: String },\n  size: { default: null, type: String },\n  required: { default: () => null, type: Boolean },\n  helpText: { default: () => null, type: [String, Function] },\n  placement: { default: () => null, type: String },\n  wrapperClass: { type: String, default: \"\" },\n  round: { type: String, default: \"md\" }\n},\n  emits: [\"blur\", \"focus\", \"update:modelValue\"],\n  setup(__props, { expose: __expose, emit: __emit }) {\n\n\n\nconst emit = __emit;\nconst $attrs = useAttrs();\nconst $slots = useSlots();\n\nconst vFocus = { ...vue3Focus };\nconst componentId = uuId();\nlet isFocused = ref<boolean>(false);\nlet isHovered = ref<boolean>(false);\n\nconst props = __props;\n\nconst dynamicAttributes = computed((): Record<string, any> => {\n  const placeholder = props.placeholder || props.label;\n  let attributes: Record<string, any> = { ...($attrs || {}) };\n  if (props.maxlength) attributes[\"maxlength\"] = props.maxlength;\n  if (props.maxRows) attributes[\"max-rows\"] = props.maxRows;\n  if (props.rows) attributes[\"rows\"] = props.rows;\n  if (props.placeholder) {\n    attributes[\"placeholder\"] = placeholder;\n  }\n  if (props.label?.length)\n    attributes[\"aria-labelledby\"] = `${componentId}-label`;\n  if (props.helpText?.length)\n    attributes[\"aria-describedby\"] = `${componentId}-description`;\n  return attributes;\n});\n\nconst computedStyles = computed((): Record<string, string> => {\n  if (props.maxRows) return {};\n  return props.autosize\n    ? { maxHeight: props.maxHeight + \"rem\" }\n    : { height: props.height + \"rem\" };\n});\n\nconst getValue = computed((): string => {\n  const value = props.modelValue || \"\";\n  return value.trimStart();\n});\n\nfunction onFocus(event: Event) {\n  if (!isFocused.value) emit(\"focus\", event);\n  isFocused.value = true;\n}\n\nfunction autoResizeTextArea(event: Event) {\n  if (props.autosize) {\n    const target: HTMLElement | null = event.target as HTMLElement;\n    target.style.height = \"auto\";\n    target.style.height = `${target.scrollHeight}px`;\n  }\n}\n\nfunction keyEvents(event: KeyboardEvent) {\n  if (\n    event.key === \" \" &&\n    (event.target as HTMLTextAreaElement).selectionStart === 0\n  ) {\n    event.preventDefault();\n    return false;\n  }\n  return true;\n}\n\nfunction onBlur(event: Event) {\n  isFocused.value = false;\n  emit(\"blur\", event);\n}\n\nfunction onHover(value: boolean) {\n  if (isHovered.value === value) return;\n  isHovered.value = value;\n}\n\nfunction onInput(event: Event) {\n  const value = (event.target as HTMLTextAreaElement).value;\n  emit(\n    \"update:modelValue\",\n    typeof value === \"string\" ? value.trimStart() : value\n  );\n  autoResizeTextArea(event);\n}\n\n__expose({ focus: onFocus, blur: onBlur });\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _mergeProps({\n    class: [{ hovered: _unref(isHovered) }]\n  }, _unref(bindCustomAttributes)(_unref($attrs))), [\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"cyw-label cyw-flex-between-center cyw-text-f12\", [{\n        '--disabled': props.disabled\n      }]])\n    }, [\n      _renderSlot(_ctx.$slots, \"label\", {}, () => [\n        _createElementVNode(\"label\", {\n          class: \"cyw-text-medium\",\n          id: `${_unref(componentId)}-label`\n        }, _toDisplayString(props.label), 9 /* TEXT, PROPS */, _hoisted_1),\n        (__props.maxlength)\n          ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString(getValue.value?.length || 0) + \" / \" + _toDisplayString(props.maxlength), 1 /* TEXT */))\n          : _createCommentVNode(\"v-if\", true)\n      ])\n    ], 2 /* CLASS */),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"cyw-textarea cyw-wrapper\", [\n        `${__props.wrapperClass} cyw-round-${props.round}`,\n        {\n          focused: _unref(isFocused),\n          hovered: _unref(isHovered),\n          'cyw-textarea__autosize': props.autosize,\n          'cyw-inline-flex': _unref($slots).append,\n          disabled: props.disabled\n        }\n      ]])\n    }, [\n      _withDirectives(_createElementVNode(\"textarea\", _mergeProps({\n        class: [\"cyw-flex cyw-overlay-scroll cyw-flex-grow-1\", `${props.className} cyw-round-${props.round}`],\n        disabled: props.disabled,\n        autofocus: props.autofocus,\n        \"aria-label\": props.label,\n        value: __props.modelValue,\n        required: props.required,\n        style: computedStyles.value\n      }, { ...dynamicAttributes.value, ..._unref(generateTestId)(_unref($attrs), 'textarea') }, {\n        onKeypress: keyEvents,\n        onFocus: onFocus,\n        onBlur: onBlur,\n        onInput: onInput,\n        onMouseenter: _cache[0] || (_cache[0] = ($event: any) => (onHover(true))),\n        onMouseleave: _cache[1] || (_cache[1] = ($event: any) => (onHover(false)))\n      }), null, 16 /* FULL_PROPS */, _hoisted_3), [\n        [vFocus, _unref(isFocused)]\n      ]),\n      (_unref($slots).append)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: _normalizeClass([\"cyw-textarea__append cyw-flex-align-center\", `cyw-round-${props.round}`])\n          }, [\n            _renderSlot(_ctx.$slots, \"append\")\n          ], 2 /* CLASS */))\n        : _createCommentVNode(\"v-if\", true)\n    ], 2 /* CLASS */),\n    (props.helpText)\n      ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 0,\n          id: `${_unref(componentId)}-description`,\n          class: \"cyw-textarea-helptext cyw-text-f12\"\n        }, _toDisplayString(props.helpText), 9 /* TEXT, PROPS */, _hoisted_4))\n      : _createCommentVNode(\"v-if\", true)\n  ], 16 /* FULL_PROPS */))\n}\n}\n\n})"],"names":["_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_sfc_main","_defineComponent","__props","__expose","__emit","emit","$attrs","useAttrs","$slots","useSlots","vFocus","vue3Focus","componentId","uuId","isFocused","ref","isHovered","props","dynamicAttributes","computed","placeholder","attributes","computedStyles","getValue","onFocus","event","autoResizeTextArea","target","keyEvents","onBlur","onHover","value","onInput","_ctx","_cache","_openBlock","_createElementBlock","_mergeProps","_unref","bindCustomAttributes","_createElementVNode","_normalizeClass","_renderSlot","_toDisplayString","_createCommentVNode","_withDirectives","generateTestId","$event"],"mappings":"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"}
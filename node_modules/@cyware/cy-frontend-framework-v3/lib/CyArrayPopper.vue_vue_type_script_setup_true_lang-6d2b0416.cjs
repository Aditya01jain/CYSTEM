"use strict";const e=require("vue"),u=require("./components/array-popper/variables.cjs"),v=require("./CyTooltip.vue_vue_type_script_setup_true_lang-f48e6aa4.cjs"),y=require("./utilities/prototypes.cjs"),w=require("./CyButton.vue_vue_type_script_setup_true_lang-33e4d3d7.cjs"),b=require("./CyDropdown.vue_vue_type_script_setup_true_lang-8460d3a0.cjs"),k=require("./utilities/bind-attributes.cjs"),N={key:0,class:"cyw-list-unstyled cyw-flex-wrap cyw-flex-start-center cyw-my-0"},E={key:0,"aria-hidden":!0},T={role:"list",class:"cyw-list-unstyled cyw-flex-wrap cyw-p-2"},V=["aria-label"],S={key:0,"aria-hidden":!0},$={key:1},D=e.defineComponent({name:"CyArrayPopper",__name:"CyArrayPopper",props:{config:{},value:{}},setup(h){const p=h,o=e.ref(u.DEFAULT_CONFIG),f=e.ref(""),c=e.ref({}),m=e.computed(()=>p.config?.mapper||p.config?.key),d=e.computed(()=>a(-1).length-s("slice",0));function C(){o.value={...o.value,...p.config||{}},B(),f.value=_(1)}function B(){let t=s("type","default");c.value=u.COMPONENT_MAP[t]||u.COMPONENT_MAP.default,o.value={...o.value,...c.value.config||{}}}function s(t,r=""){return y.getProp(o.value,t,r)}function _(t=0){const r=(m.value||"").split(":");return r.length>1?r[t]:t?null:r[0]}function i(t={}){return f.value?y.getProp(t||{},f.value,o.value.defaultValue):t}function g(t){const r=c.value.props||{};return o.value.type==="tags"&&(r.colorCode=t?.colour_code),r}function a(t=0){let r=p.value||[];if(!m.value&&typeof r?.[0]!="string")return[];const n=_();if(n&&(r=r[n]||[]),!Array.isArray(r)&&Object.keys(r||{}).length&&(r=Object.values(r)),t===-1)return r;r.length>u.MAX_COUNT&&(r=r.slice(0,u.MAX_COUNT));const l=o.value.slice;return t?r.slice(l):r.slice(0,l)}function P(){typeof o.value.moreTrigger=="function"&&o.value.moreTrigger()}return e.watch(()=>p.config,C,{deep:!0,immediate:!0}),(t,r)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({class:"cyw-color-base-font cyw-array-popper"},t.$attrs||{}),[a().length?(e.openBlock(),e.createElementBlock("div",N,[e.renderSlot(t.$slots,"items",{value:a()},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a(),(n,l)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(c.value.component),e.mergeProps({key:`item-${l}`,class:"cyw-flex",ref_for:!0},g(n),{class:e.unref(y.getProp)(n,"class","")}),{default:e.withCtx(()=>[e.createVNode(v._sfc_main,{content:i(n),effect:"dark",enterable:!1,"popper-class":`cyw-datarenderer__tooltip ${s("tooltip.class")}`,placement:s("tooltip.placement")},{default:e.withCtx(()=>[e.createElementVNode("span",e.mergeProps({ref_for:!0},e.unref(k.generateTestId)(t.$attrs,`${n}-item-array-popper`)),e.toDisplayString(i(n).slice(0,o.value.valueSlice)),17)]),_:2},1032,["content","popper-class","placement"]),l<a().length-1&&o.value.separator?(e.openBlock(),e.createElementBlock("span",E,e.toDisplayString(o.value.separator)+"  ",1)):e.createCommentVNode("v-if",!0)]),_:2},1040,["class"]))),128))]),d.value>0?e.renderSlot(t.$slots,"showMore",e.normalizeProps(e.mergeProps({key:0},{config:t.config,values:a(1)})),()=>[e.unref(y.getProp)(t.config,"moreTrigger.type","")==="button"?(e.openBlock(),e.createBlock(w._sfc_main,{key:0,type:"secondary",size:"sm",class:"cyw-ml-2 cyw-round-sm cyw-p-1",onClick:P,"data-testid":"array-popper-more-count-btn"},{default:e.withCtx(()=>[e.createTextVNode(" +"+e.toDisplayString(d.value),1)]),_:1})):(e.openBlock(),e.createBlock(b._sfc_main,{key:1,width:o.value.popperWidth||"20",placement:o.value.placement,focusOptions:{skipInitFocus:!0},dropdownClass:"cyw-array-popper__dropdown"},{"dropdown-link":e.withCtx(()=>[e.renderSlot(t.$slots,"more-btn",{},()=>[e.createVNode(w._sfc_main,{type:"tertiary",class:"cyw-min-w-auto cyw-ml-1 cyw-array-popper__btn cyw-p-1","data-testid":"array-popper-more-dropdown-btn"},{default:e.withCtx(()=>[e.createTextVNode(" +"+e.toDisplayString(d.value),1)]),_:1})])]),dropdown:e.withCtx(()=>[e.createElementVNode("ul",T,[e.renderSlot(t.$slots,"dropdown",{data:a(1)},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a(1),(n,l)=>(e.openBlock(),e.createElementBlock("li",e.mergeProps({class:"cyw-flex",role:"listitem",key:`${t.config.key}-more-${l}`,"aria-label":i(n),ref_for:!0},e.unref(k.generateTestId)(t.$attrs,`${n}-item-array-popper`)),[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(c.value.component),e.mergeProps({class:["cyw-w-100 cyw-mb-3",{"cyw-mr-2":c.value.component==="cy-tag"}],ref_for:!0},g(n)),{default:e.withCtx(()=>[e.createVNode(v._sfc_main,{content:i(n),effect:"dark",enterable:!1,"popper-class":s("tooltip.class"),placement:s("tooltip.placement")},{default:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(i(n).slice(0,o.value.dropdownTooltip)),1)]),_:2},1032,["content","popper-class","placement"])]),_:2},1040,["class"])),l<a(1).length-1&&o.value.separator?(e.openBlock(),e.createElementBlock("span",S,e.toDisplayString(o.value.separator)+"  ",1)):e.createCommentVNode("v-if",!0)],16,V))),128))])])]),_:3},8,["width","placement"]))]):e.createCommentVNode("v-if",!0)])):(e.openBlock(),e.createElementBlock("span",$,e.toDisplayString(o.value.emptyMessage),1))],16))}});exports._sfc_main=D;
//# sourceMappingURL=CyArrayPopper.vue_vue_type_script_setup_true_lang-6d2b0416.cjs.map

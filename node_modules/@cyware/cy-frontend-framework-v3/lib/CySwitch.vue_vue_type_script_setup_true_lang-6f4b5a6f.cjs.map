{"version":3,"file":"CySwitch.vue_vue_type_script_setup_true_lang-6f4b5a6f.cjs","sources":["../src/components/switch/CySwitch.vue?vue&type=script&setup=true&lang.ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, mergeProps as _mergeProps, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withModifiers as _withModifiers } from \"vue\"\n\nconst _hoisted_1 = [\"name\"]\nconst _hoisted_2 = [\"aria-checked\", \"value\", \"name\", \"checked\", \"required\", \"id\", \"disabled\"]\nconst _hoisted_3 = { class: \"cyw-switch-container\" }\nconst _hoisted_4 = [\"for\"]\n\nimport { ref, reactive, computed, watch, useAttrs, onMounted } from \"vue\";\nimport { KEYBOARD_EVENTS } from \"../../utilities/constants\";\nimport { uuId } from \"../../utilities/shared\";\nimport { generateTestId, bindCustomAttributes } from \"../../utilities/bind-attributes.js\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{\n  name: \"CySwitch\",\n  inheritAttrs: false\n},\n  __name: 'CySwitch',\n  props: {\n  required: { default: false, type: Boolean },\n  modelValue: { default: false, type: Boolean },\n  activeText: { default: null, type: String },\n  inactiveText: { default: null, type: String },\n  activeValue: { default: null, type: [String, Number] },\n  inactiveValue: { default: null, type: [String, Number] },\n  type: { default: \"primary\", type: String },\n  switchType: { default: \"\", type: String },\n  name: { default: () => \"switch\", type: String },\n  disabled: { default: false, type: Boolean },\n  labelClass: { default: \"\", type: String },\n  isPartialSelection: { default: false, type: Boolean },\n  selectedChildrenCount: { default: 0, type: Number },\n  totalChildrenCount: { default: 0, type: Number }\n},\n  emits: [\"click\", \"update:modelValue\", \"keydown\"],\n  setup(__props, { emit: __emit }) {\n\n\n\nconst attrs = useAttrs();\nconst emit = __emit;\nconst props = __props;\nconst state = reactive({\n  computedStyle: reactive({}),\n  isHovered: ref<boolean>(false),\n  handleStyle: reactive({}),\n  switchId: `switch-${uuId()}`\n});\nconst switchBallRef = ref<any>();\n\nconst dimensions: Record<string, number> = { width: 24, gap: 12 };\n\nconst getAttributes = computed(() => {\n  let attributes = { ...(attrs || {}) };\n  const label = getLabel as any;\n  if (props.isPartialSelection) {\n    attributes[\"aria-label\"] =\n      `${props.selectedChildrenCount} selected out of ${props.totalChildrenCount}`;\n  } else if (label?.length) {\n    attributes[\"aria-label\"] = label;\n  } else if (\n    (props.activeValue as string)?.length ||\n    (props.inactiveValue as string)?.length\n  ) {\n    attributes[\"aria-label\"] = getValue\n      ? props.activeValue\n      : props.inactiveValue;\n  }\n  return attributes;\n});\n\nconst getLabel = computed(() => {\n  let label: any = null;\n  if (props.activeText?.length && props.modelValue) label = props.activeText;\n  else if (props.inactiveText?.length && !props.modelValue)\n    label = props.inactiveText;\n  return label || \"\";\n});\n\nconst computeWidth = computed(() => {\n  const defaultWidth = dimensions.width;\n  let maxWidth = 0;\n  if (props.switchType === \"label\") {\n    let activeWidth = (props.activeText?.length || 0) * 8;\n    let inactiveWidth = (props.inactiveText?.length || 0) * 8;\n    maxWidth = activeWidth > inactiveWidth ? activeWidth : inactiveWidth;\n    maxWidth = maxWidth + dimensions.gap;\n  }\n  return maxWidth > defaultWidth ? maxWidth : defaultWidth;\n});\n\nconst getValue = computed(() => {\n  let value = props.modelValue;\n  if (props.activeValue)\n    value = props.activeValue === (props.modelValue as any);\n  else if (props.inactiveValue)\n    value = props.inactiveValue === (props.modelValue as any);\n  return value;\n});\n\nonMounted(() => {\n  state.handleStyle = getBallStyle();\n});\n\nfunction handleKeydown(event: any) {\n  const key = event?.which || event?.keyCode;\n  if (KEYBOARD_EVENTS.ENTER.includes(key)) {\n    event?.stopPropagation();\n    event?.preventDefault();\n    toggle(event);\n  }\n  emit(\"keydown\", event);\n}\n\nfunction getBallStyle() {\n  const element = switchBallRef.value;\n  const defaultCheck = getValue.value;\n  let offset = 14;\n  if (element?.offsetParent) {\n    offset = element.offsetParent.clientWidth - element.offsetWidth;\n  }\n  let styles;\n  if (defaultCheck) {\n    styles = {\n      left: offset + \"px\",\n      right: 0 + \"px\"\n    };\n  } else {\n    styles = {\n      right: offset + \"px\",\n      left: 0 + \"px\"\n    };\n  }\n  return styles;\n}\n\nfunction setStyle() {\n  const activeValue = props.activeValue || true;\n  let offset = dimensions.offset || -8;\n  if (props.modelValue === activeValue)\n    offset =\n      props.switchType === \"label\"\n        ? (computeWidth as any) - dimensions.gap\n        : dimensions.gap;\n  state.computedStyle = { transform: `translateX(${offset}px)` };\n}\nfunction toggle(event: any = null) {\n  if (props.disabled) return;\n  if (event?.type === \"click\") emit(\"click\", event.target.value);\n  let value = !getValue.value;\n  if (props.inactiveValue && getValue.value) value = props.inactiveValue as any;\n  else if (props.activeValue && !getValue.value)\n    value = props.activeValue as any;\n  if (!props.disabled) emit(\"update:modelValue\", value);\n}\nwatch(\n  () => props.modelValue,\n  () => {\n    setStyle();\n  },\n  { immediate: true }\n);\nwatch(\n  () => computeWidth,\n  () => {\n    setStyle();\n  }\n);\nwatch(getValue, () => {\n  state.handleStyle = getBallStyle();\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _mergeProps(_unref(bindCustomAttributes)(_ctx.$attrs), {\n    class: [\"cyw-switch cyw-flex-center cyw-py-2 cyw-mx-1\", { 'cyw-switch--disabled': props.disabled }],\n    name: props.name,\n    onClick: _withModifiers(toggle, [\"stop\",\"prevent\"])\n  }), [\n    _createElementVNode(\"input\", _mergeProps({\n      role: \"switch\",\n      type: \"checkbox\",\n      \"aria-checked\": __props.modelValue,\n      class: [{ 'cyw-switch-checked': __props.modelValue }, `cyw-switch-input`],\n      value: __props.modelValue,\n      name: props.name,\n      checked: __props.modelValue,\n      required: __props.required,\n      id: state.switchId,\n      disabled: props.disabled,\n      onChange: toggle,\n      onKeydown: handleKeydown\n    }, { ...getAttributes.value, ..._unref(generateTestId)(_ctx.$attrs, 'switch') }), null, 16 /* FULL_PROPS */, _hoisted_2),\n    _createElementVNode(\"div\", _hoisted_3, [\n      (!props.isPartialSelection)\n        ? (_openBlock(), _createElementBlock(\"span\", {\n            key: 0,\n            class: _normalizeClass([\n          `cyw-switch-temp-ball --${__props.type}`,\n          {\n            '--on': getValue.value,\n            '--hover': state.isHovered,\n            '--off': !getValue.value,\n            '--disabled': props.disabled\n          }\n        ]),\n            style: _normalizeStyle({ ...state.handleStyle })\n          }, null, 6 /* CLASS, STYLE */))\n        : _createCommentVNode(\"v-if\", true),\n      (!props.isPartialSelection)\n        ? (_openBlock(), _createElementBlock(\"span\", {\n            key: 1,\n            class: _normalizeClass([\n          `cyw-switch-input-wrapper --${__props.type}`,\n          getValue.value ? '--active' : '--in-active',\n          { '--disabled': props.disabled }\n        ]),\n            onMouseenter: _cache[0] || (_cache[0] = ($event: any) => (state.isHovered = true)),\n            onMouseleave: _cache[1] || (_cache[1] = ($event: any) => (state.isHovered = false))\n          }, [\n            _createElementVNode(\"span\", {\n              class: _normalizeClass([\n            `cyw-switch-ball --${__props.type}`,\n            {\n              '--on': getValue.value,\n              '--hover': state.isHovered,\n              '--off': !getValue.value,\n              '--disabled': props.disabled\n            }\n          ]),\n              ref_key: \"switchBallRef\",\n              ref: switchBallRef,\n              style: _normalizeStyle({ ...state.handleStyle })\n            }, null, 6 /* CLASS, STYLE */)\n          ], 34 /* CLASS, NEED_HYDRATION */))\n        : (_openBlock(), _createElementBlock(\"span\", {\n            key: 2,\n            class: _normalizeClass([\n          `cyw-switch-mixed --${__props.type} cyw-flex-center`,\n          { '--disabled': props.disabled }\n        ]),\n            onMouseenter: _cache[2] || (_cache[2] = ($event: any) => (state.isHovered = true)),\n            onMouseleave: _cache[3] || (_cache[3] = ($event: any) => (state.isHovered = false))\n          }, [\n            _createElementVNode(\"span\", {\n              class: _normalizeClass([\n            `cyw-switch-mixed-dash --${__props.type}`,\n            {\n              '--on': getValue.value,\n              '--hover': state.isHovered,\n              '--off': !getValue.value,\n              '--disabled': props.disabled\n            }\n          ])\n            }, null, 2 /* CLASS */)\n          ], 34 /* CLASS, NEED_HYDRATION */)),\n      _createElementVNode(\"label\", {\n        for: (_ctx.$attrs.for as any) || state.switchId,\n        class: _normalizeClass([`cyw-switch-label cyw-m-1 cyw-pl-1`, __props.labelClass])\n      }, [\n        _renderSlot(_ctx.$slots, \"default\", {}, () => [\n          _createTextVNode(_toDisplayString(getLabel.value), 1 /* TEXT */)\n        ])\n      ], 10 /* CLASS, PROPS */, _hoisted_4)\n    ])\n  ], 16 /* FULL_PROPS */, _hoisted_1))\n}\n}\n\n})"],"names":["_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_sfc_main","_defineComponent","__props","__emit","attrs","useAttrs","emit","props","state","reactive","ref","uuId","switchBallRef","dimensions","getAttributes","computed","attributes","label","getLabel","getValue","computeWidth","defaultWidth","maxWidth","activeWidth","inactiveWidth","value","onMounted","getBallStyle","handleKeydown","event","key","KEYBOARD_EVENTS","toggle","element","defaultCheck","offset","styles","setStyle","activeValue","watch","_ctx","_cache","_openBlock","_createElementBlock","_mergeProps","_unref","bindCustomAttributes","_withModifiers","_createElementVNode","generateTestId","_createCommentVNode","_normalizeClass","_normalizeStyle","$event","_renderSlot","_createTextVNode","_toDisplayString"],"mappings":"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"}
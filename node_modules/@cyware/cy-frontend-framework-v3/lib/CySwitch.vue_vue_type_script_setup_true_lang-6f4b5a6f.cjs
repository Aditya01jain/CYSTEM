"use strict";const e=require("vue"),S=require("./utilities/constants.cjs"),k=require("./utilities/shared.cjs"),w=require("./utilities/bind-attributes.cjs"),C=["name"],x=["aria-checked","value","name","checked","required","id","disabled"],$={class:"cyw-switch-container"},B=["for"],T=e.defineComponent({name:"CySwitch",inheritAttrs:!1,__name:"CySwitch",props:{required:{default:!1,type:Boolean},modelValue:{default:!1,type:Boolean},activeText:{default:null,type:String},inactiveText:{default:null,type:String},activeValue:{default:null,type:[String,Number]},inactiveValue:{default:null,type:[String,Number]},type:{default:"primary",type:String},switchType:{default:"",type:String},name:{default:()=>"switch",type:String},disabled:{default:!1,type:Boolean},labelClass:{default:"",type:String},isPartialSelection:{default:!1,type:Boolean},selectedChildrenCount:{default:0,type:Number},totalChildrenCount:{default:0,type:Number}},emits:["click","update:modelValue","keydown"],setup(s,{emit:p}){const b=e.useAttrs(),u=p,t=s,i=e.reactive({computedStyle:e.reactive({}),isHovered:e.ref(!1),handleStyle:e.reactive({}),switchId:`switch-${k.uuId()}`}),f=e.ref(),d={width:24,gap:12},V=e.computed(()=>{let l={...b||{}};const a=m;return t.isPartialSelection?l["aria-label"]=`${t.selectedChildrenCount} selected out of ${t.totalChildrenCount}`:a?.length?l["aria-label"]=a:(t.activeValue?.length||t.inactiveValue?.length)&&(l["aria-label"]=n?t.activeValue:t.inactiveValue),l}),m=e.computed(()=>{let l=null;return t.activeText?.length&&t.modelValue?l=t.activeText:t.inactiveText?.length&&!t.modelValue&&(l=t.inactiveText),l||""}),y=e.computed(()=>{const l=d.width;let a=0;if(t.switchType==="label"){let c=(t.activeText?.length||0)*8,o=(t.inactiveText?.length||0)*8;a=c>o?c:o,a=a+d.gap}return a>l?a:l}),n=e.computed(()=>{let l=t.modelValue;return t.activeValue?l=t.activeValue===t.modelValue:t.inactiveValue&&(l=t.inactiveValue===t.modelValue),l});e.onMounted(()=>{i.handleStyle=h()});function g(l){const a=l?.which||l?.keyCode;S.KEYBOARD_EVENTS.ENTER.includes(a)&&(l?.stopPropagation(),l?.preventDefault(),r(l)),u("keydown",l)}function h(){const l=f.value,a=n.value;let c=14;l?.offsetParent&&(c=l.offsetParent.clientWidth-l.offsetWidth);let o;return a?o={left:c+"px",right:"0px"}:o={right:c+"px",left:"0px"},o}function v(){const l=t.activeValue||!0;let a=d.offset||-8;t.modelValue===l&&(a=t.switchType==="label"?y-d.gap:d.gap),i.computedStyle={transform:`translateX(${a}px)`}}function r(l=null){if(t.disabled)return;l?.type==="click"&&u("click",l.target.value);let a=!n.value;t.inactiveValue&&n.value?a=t.inactiveValue:t.activeValue&&!n.value&&(a=t.activeValue),t.disabled||u("update:modelValue",a)}return e.watch(()=>t.modelValue,()=>{v()},{immediate:!0}),e.watch(()=>y,()=>{v()}),e.watch(n,()=>{i.handleStyle=h()}),(l,a)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps(e.unref(w.bindCustomAttributes)(l.$attrs),{class:["cyw-switch cyw-flex-center cyw-py-2 cyw-mx-1",{"cyw-switch--disabled":t.disabled}],name:t.name,onClick:e.withModifiers(r,["stop","prevent"])}),[e.createElementVNode("input",e.mergeProps({role:"switch",type:"checkbox","aria-checked":s.modelValue,class:[{"cyw-switch-checked":s.modelValue},"cyw-switch-input"],value:s.modelValue,name:t.name,checked:s.modelValue,required:s.required,id:i.switchId,disabled:t.disabled,onChange:r,onKeydown:g},{...V.value,...e.unref(w.generateTestId)(l.$attrs,"switch")}),null,16,x),e.createElementVNode("div",$,[t.isPartialSelection?e.createCommentVNode("v-if",!0):(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass([`cyw-switch-temp-ball --${s.type}`,{"--on":n.value,"--hover":i.isHovered,"--off":!n.value,"--disabled":t.disabled}]),style:e.normalizeStyle({...i.handleStyle})},null,6)),t.isPartialSelection?(e.openBlock(),e.createElementBlock("span",{key:2,class:e.normalizeClass([`cyw-switch-mixed --${s.type} cyw-flex-center`,{"--disabled":t.disabled}]),onMouseenter:a[2]||(a[2]=c=>i.isHovered=!0),onMouseleave:a[3]||(a[3]=c=>i.isHovered=!1)},[e.createElementVNode("span",{class:e.normalizeClass([`cyw-switch-mixed-dash --${s.type}`,{"--on":n.value,"--hover":i.isHovered,"--off":!n.value,"--disabled":t.disabled}])},null,2)],34)):(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass([`cyw-switch-input-wrapper --${s.type}`,n.value?"--active":"--in-active",{"--disabled":t.disabled}]),onMouseenter:a[0]||(a[0]=c=>i.isHovered=!0),onMouseleave:a[1]||(a[1]=c=>i.isHovered=!1)},[e.createElementVNode("span",{class:e.normalizeClass([`cyw-switch-ball --${s.type}`,{"--on":n.value,"--hover":i.isHovered,"--off":!n.value,"--disabled":t.disabled}]),ref_key:"switchBallRef",ref:f,style:e.normalizeStyle({...i.handleStyle})},null,6)],34)),e.createElementVNode("label",{for:l.$attrs.for||i.switchId,class:e.normalizeClass(["cyw-switch-label cyw-m-1 cyw-pl-1",s.labelClass])},[e.renderSlot(l.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(m.value),1)])],10,B)])],16,C))}});exports._sfc_main=T;
//# sourceMappingURL=CySwitch.vue_vue_type_script_setup_true_lang-6f4b5a6f.cjs.map

{"version":3,"file":"CyFilter.vue_vue_type_script_setup_true_lang-ab27c005.cjs","sources":["../src/components/filter/CyFilter.vue?vue&type=script&setup=true&lang.ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderSlot as _renderSlot, mergeProps as _mergeProps, createVNode as _createVNode, createCommentVNode as _createCommentVNode, normalizeProps as _normalizeProps, guardReactiveProps as _guardReactiveProps, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { ref, useAttrs } from 'vue'\nimport type { FilterProps, DefaultConfigType } from './types'\nimport FilterList from './components/FilterList.vue'\nimport { isEmpty } from \"radash\";\nimport { generateTestId } from '../../utilities/bind-attributes';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{ \n  name: 'CyFilter',\n  inheritAttrs: false\n},\n  __name: 'CyFilter',\n  props: {\n    filters: { default: () => ([]) },\n    type: { default: 'pro' },\n    config: { default: () =>  ({}) },\n    apiService: { default: () => ({api: () => {}, apiPrefix: ''}) },\n    staticFilterCount: { default: 3 },\n    defaultValue: { default: null },\n    timezone: { default: null }\n  },\n  emits: ['apply', 'input', 'add:filter', 'open:filter', 'close:filter', 'blur', 'focus', 'reset:filter', 'reset:all'],\n  setup(__props: any, { expose: __expose, emit: __emit }) {\n\n\n\nconst $attrs = useAttrs();\n\nconst props = __props\n\nconst filterListRef: any = ref(null)\n\nconst emits = __emit\n\nconst defaultConfig: DefaultConfigType = {\n  hideSearch: false,\n  resultKey: 'results',\n  searchKey: 'q',\n  searchSize: 'md',\n  clearAllOnReset: false,\n  labels: {\n    moreBtn: 'Filters'\n  },\n}\n\nfunction applyFilters(value: Record<string, any>) {\n  let filteredValues: Record<string, any> = {}\n  Object.keys(value).forEach((key: string) => {\n    if ([0, false, true].includes(value[key]) || (!isEmpty(value[key]) && value[key])) {\n      filteredValues[key] = value[key]\n    }\n  })\n  emits('apply', filteredValues)\n}\n\nfunction setDefaultValues($event: Record<string, any>) {\n  filterListRef.value?.setDefaultValues($event)\n}\n\nfunction resetAll() {\n  filterListRef.value?.resetAll()\n}\n\nfunction focusSearchInput() {\n  filterListRef.value?.focusSearchInput()\n}\n\n__expose({ setDefaultValues, resetAll, focusSearchInput })\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _mergeProps({\n    class: [\"cyw-filter-view cyw-flex-align-center cyw-base-font\", {'cyw-inline-flex': props.type === 'basic'}]\n  }, {..._unref($attrs), ..._unref(generateTestId)(_unref($attrs), 'filter')}), [\n    _renderSlot(_ctx.$slots, \"prepend\"),\n    _createVNode(FilterList, _mergeProps({\n      ref_key: \"filterListRef\",\n      ref: filterListRef,\n      filterList: props.filters,\n      config: {...defaultConfig, ...props.config},\n      type: props.type,\n      apiService: props.apiService,\n      defaultValue: props.defaultValue,\n      staticFilterCount: props.staticFilterCount,\n      timezone: props.timezone\n    }, _unref($attrs), {\n      onApply: applyFilters,\n      \"onAdd:filter\": _cache[0] || (_cache[0] = ($event: any) => (emits('add:filter', $event))),\n      \"onOpen:filter\": _cache[1] || (_cache[1] = ($event: any) => (emits('open:filter', $event))),\n      \"onClose:filter\": _cache[2] || (_cache[2] = ($event: any) => (emits('close:filter', $event))),\n      \"onReset:filter\": _cache[3] || (_cache[3] = ($event: any) => (emits('reset:filter', $event))),\n      \"onReset:all\": _cache[4] || (_cache[4] = ($event: any) => (emits('reset:all'))),\n      onInput: _cache[5] || (_cache[5] = ($event: any) => (emits('input', $event))),\n      onBlur: _cache[6] || (_cache[6] = ($event: any) => (emits('blur'))),\n      onFocus: _cache[7] || (_cache[7] = ($event: any) => (emits('focus')))\n    }), null, 16 /* FULL_PROPS */, [\"filterList\", \"config\", \"type\", \"apiService\", \"defaultValue\", \"staticFilterCount\", \"timezone\"]),\n    _createCommentVNode(\" CQL filters , save search to be done \"),\n    _renderSlot(_ctx.$slots, \"append\", _normalizeProps(_guardReactiveProps({ setDefaultValues: filterListRef.value?.setDefaultValues })))\n  ], 16 /* FULL_PROPS */))\n}\n}\n\n})"],"names":["_sfc_main","_defineComponent","__props","__expose","__emit","$attrs","useAttrs","props","filterListRef","ref","emits","defaultConfig","applyFilters","value","filteredValues","key","isEmpty","setDefaultValues","$event","resetAll","focusSearchInput","_ctx","_cache","_openBlock","_createElementBlock","_mergeProps","_unref","generateTestId","_renderSlot","_createVNode","FilterList","_createCommentVNode","_normalizeProps","_guardReactiveProps"],"mappings":"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"}
{"version":3,"file":"keysMixin.cjs","sources":["../../src/mixins/keysMixin.js"],"sourcesContent":["export default {\n  data() {\n    return {\n      listId: null,\n      activeIndex: -1,\n      enterTrigger: null,\n    };\n  },\n  created() {\n    this.listId = this.componentId + \"-list\";\n  },\n  methods: {\n    listEvents(e, search = \"\") {\n      e.stopPropagation();\n      e.preventDefault();\n      let data =\n        search && search.length === 0 ? this.data : this.getFilteredData;\n      let empty = data && data.length === 0;\n      if ([38, 40, 27, 13].includes(e.keyCode)) {\n        if (e.keyCode === 38 && !empty) {\n          // up\n          if (this.activeIndex >= 0) {\n            this.focusPrev(data);\n          }\n        } else if (e.keyCode === 40 && !empty) {\n          // down\n          if (this.activeIndex < 0) {\n            this.focusFirstChild();\n          } else if (\n            this.activeIndex >= 0 &&\n            this.activeIndex <= data.length - 1\n          ) {\n            this.focusNext(data);\n          }\n        } else if (e.keyCode === 13) {\n          if (this.activeIndex >= 0 && !this.isListEmpty) {\n            let item = data[this.activeIndex];\n            this.setSelectedData(item);\n          }\n        } else if (e.keyCode === 27) {\n          this.close();\n        }\n      }\n    },\n    preventTrimEvents(event) {\n      if (event.which === 32 && event.target.selectionStart === 0) {\n        event.preventDefault();\n        return false;\n      }\n      return false;\n    },\n    keyEvents(evts) {\n      evts?.stopPropagation();\n      if (this.disabled) return;\n      if ([9, 27, 40, 13].includes(evts.keyCode))\n        if (evts.keyCode === 9) {\n          if (this.showFilter) this.isFocused = true;\n          else this.isFocused = !this.isFocused;\n          this.parentEvent(evts);\n        } else if (evts.keyCode === 27) {\n          evts?.preventDefault();\n          this.close();\n        } else if (evts.keyCode === 40) {\n          this.listfocus();\n        } else if (evts.keyCode === 13) {\n          if (this.enterTrigger) this[this.enterTrigger](evts);\n          this.$emit(\"enter\", evts);\n        }\n    },\n    listfocus() {\n      if (this.showFilter)\n        setTimeout(() => {\n          let ref = `#${this.listId}`;\n          if (this.$el.querySelector(ref)) this.$el.querySelector(ref)?.focus();\n          this.activeIndex = -1;\n          this.focusFirstChild();\n        }, 100);\n    },\n    focusFirstChild() {\n      let parent = this.$el.querySelector(`#${this.listId}`);\n      this.activeIndex = 0;\n      if (parent?.firstChild && typeof parent.firstChild === HTMLElement) {\n        parent.firstChild?.setAttribute(\"tabIndex\", \"0\");\n        parent.firstChild?.focus();\n      }\n    },\n    focusNext(data) {\n      let currElement = this.$el.querySelector(\n        \"#list-item-\" + this.activeIndex\n      );\n      currElement.setAttribute(\"tabIndex\", \"-1\");\n      this.activeIndex++;\n      if (this.activeIndex <= data.length - 1) {\n        currElement.nextSibling.setAttribute(\"tabIndex\", \"0\");\n        currElement.nextSibling.focus();\n      } else this.focusFirstChild();\n    },\n    focusPrev(data) {\n      let currElement = this.$el.querySelector(\n        \"#list-item-\" + this.activeIndex\n      );\n      currElement.setAttribute(\"tabIndex\", \"-1\");\n      this.activeIndex--;\n      if (this.activeIndex >= 0) {\n        currElement.previousSibling.setAttribute(\"tabIndex\", \"0\");\n        currElement.previousSibling.focus();\n      } else this.focusFirstChild();\n    },\n  },\n};\n"],"names":["keysMixin","search","data","empty","item","event","evts","ref","parent","currElement"],"mappings":"4GAAA,MAAeA,EAAA,CACb,MAAO,CACL,MAAO,CACL,OAAQ,KACR,YAAa,GACb,aAAc,IACpB,CACG,EACD,SAAU,CACR,KAAK,OAAS,KAAK,YAAc,OAClC,EACD,QAAS,CACP,WAAW,EAAGC,EAAS,GAAI,CACzB,EAAE,gBAAe,EACjB,EAAE,eAAc,EAChB,IAAIC,EACFD,GAAUA,EAAO,SAAW,EAAI,KAAK,KAAO,KAAK,gBAC/CE,EAAQD,GAAQA,EAAK,SAAW,EACpC,GAAI,CAAC,GAAI,GAAI,GAAI,EAAE,EAAE,SAAS,EAAE,OAAO,EACrC,GAAI,EAAE,UAAY,IAAM,CAACC,EAEnB,KAAK,aAAe,GACtB,KAAK,UAAUD,CAAI,UAEZ,EAAE,UAAY,IAAM,CAACC,EAE1B,KAAK,YAAc,EACrB,KAAK,gBAAe,EAEpB,KAAK,aAAe,GACpB,KAAK,aAAeD,EAAK,OAAS,GAElC,KAAK,UAAUA,CAAI,UAEZ,EAAE,UAAY,IACvB,GAAI,KAAK,aAAe,GAAK,CAAC,KAAK,YAAa,CAC9C,IAAIE,EAAOF,EAAK,KAAK,WAAW,EAChC,KAAK,gBAAgBE,CAAI,CAC1B,OACQ,EAAE,UAAY,IACvB,KAAK,MAAK,CAGf,EACD,kBAAkBC,EAAO,CACvB,OAAIA,EAAM,QAAU,IAAMA,EAAM,OAAO,iBAAmB,GACxDA,EAAM,eAAc,EACb,EAGV,EACD,UAAUC,EAAM,CACdA,GAAM,gBAAe,EACjB,MAAK,UACL,CAAC,EAAG,GAAI,GAAI,EAAE,EAAE,SAASA,EAAK,OAAO,IACnCA,EAAK,UAAY,GACf,KAAK,WAAY,KAAK,UAAY,GACjC,KAAK,UAAY,CAAC,KAAK,UAC5B,KAAK,YAAYA,CAAI,GACZA,EAAK,UAAY,IAC1BA,GAAM,eAAc,EACpB,KAAK,MAAK,GACDA,EAAK,UAAY,GAC1B,KAAK,UAAS,EACLA,EAAK,UAAY,KACtB,KAAK,cAAc,KAAK,KAAK,YAAY,EAAEA,CAAI,EACnD,KAAK,MAAM,QAASA,CAAI,GAE7B,EACD,WAAY,CACN,KAAK,YACP,WAAW,IAAM,CACf,IAAIC,EAAM,IAAI,KAAK,MAAM,GACrB,KAAK,IAAI,cAAcA,CAAG,GAAG,KAAK,IAAI,cAAcA,CAAG,GAAG,MAAK,EACnE,KAAK,YAAc,GACnB,KAAK,gBAAe,CACrB,EAAE,GAAG,CACT,EACD,iBAAkB,CAChB,IAAIC,EAAS,KAAK,IAAI,cAAc,IAAI,KAAK,MAAM,EAAE,EACrD,KAAK,YAAc,EACfA,GAAQ,YAAc,OAAOA,EAAO,aAAe,cACrDA,EAAO,YAAY,aAAa,WAAY,GAAG,EAC/CA,EAAO,YAAY,QAEtB,EACD,UAAUN,EAAM,CACd,IAAIO,EAAc,KAAK,IAAI,cACzB,cAAgB,KAAK,WAC7B,EACMA,EAAY,aAAa,WAAY,IAAI,EACzC,KAAK,cACD,KAAK,aAAeP,EAAK,OAAS,GACpCO,EAAY,YAAY,aAAa,WAAY,GAAG,EACpDA,EAAY,YAAY,SACnB,KAAK,iBACb,EACD,UAAUP,EAAM,CACd,IAAIO,EAAc,KAAK,IAAI,cACzB,cAAgB,KAAK,WAC7B,EACMA,EAAY,aAAa,WAAY,IAAI,EACzC,KAAK,cACD,KAAK,aAAe,GACtBA,EAAY,gBAAgB,aAAa,WAAY,GAAG,EACxDA,EAAY,gBAAgB,SACvB,KAAK,iBACb,CACF,CACH"}
"use strict";const e=require("vue"),V=require("./CyPopper.vue_vue_type_script_setup_true_lang-f8d24da6.cjs"),m=require("./components/select/CySelect.cjs"),c=require("./CyButton.vue_vue_type_script_setup_true_lang-33e4d3d7.cjs"),i=require("./components/sort/variable.cjs"),s=require("./utilities/bind-attributes.cjs"),g={class:"cyw-ml-2"},h={class:"cyw-p-3",style:{width:"40rem"}},N={class:"cyw-flex-between-center cyw-px-3"},C={class:"cyw-flex-grow-1 cyw-ml-3 cyw-color-N800 cyw-text-f14 cyw-text-medium"},E={class:"cyw-p-3 cyw-flex-align-center"},L={key:0},B={class:"cyw-flex-end-center cyw-px-3"},T=e.defineComponent({name:"CySort",inheritAttrs:!1,__name:"CySort",props:{options:{default:()=>[]},defaultSort:{},valueIdentifier:{default:"label"},identifier:{default:"id"},defaultOnReset:{type:Boolean,default:!1},parent:{default:()=>document.body}},emits:["on:sort","on:reset"],setup(_,{emit:v}){const a=e.useAttrs(),r=_,u=v,t=e.reactive({value:{},order:"",visible:!1,display:{value:{},order:""}}),p=e.ref(),w=e.computed(()=>{const n=i.SORT_OPTIONS.find(o=>o.id===t.display?.order)?.id;return n?`(${i.LABELS[n]})`:""}),b=e.computed(()=>{const n=r.options?.find?.(o=>o[r.valueIdentifier]===t.display?.value?.[r.valueIdentifier]);return`${i.LABELS["sort-by"]}${n?`: ${n.label}`:""}`});e.onMounted(()=>{f()});function f(){r.defaultSort?.prop&&(t.value=r.options.find(n=>n[r.identifier]===r.defaultSort?.prop)||{}),r.defaultSort?.order&&(t.order=r.defaultSort?.order),t.display={value:t.value,order:t.order}}function x(){t.visible=!0,p.value?.open()}function S(){r.defaultOnReset?f():(t.value={},t.order=""),y(),u("on:reset")}function y(){const n=t.value[r.identifier];t.display={value:t.value,order:t.order},u("on:sort",{prop:n,order:t.order,sort:`${t.order==="descending"?"-":""}${n}`})}return(n,o)=>(e.openBlock(),e.createBlock(V._sfc_main,e.mergeProps({ref_key:"popperRef",ref:p,placement:"bottom-start","popper-class":"cyw-border cyw-sort__popper"},e.unref(s.bindCustomAttributes)(e.unref(a)),{onHide:o[2]||(o[2]=d=>t.visible=!1),parent:r.parent}),{reference:e.withCtx(()=>[e.createVNode(c._sfc_main,e.mergeProps({type:"tertiary",subtype:"subtle",class:"cyw-p-2 cyw-mr-3 active","aria-haspopup":"dialog"},{...e.unref(s.generateTestId)(e.unref(a),"sort")},{"aria-expanded":t.visible.toString(),onClick:x}),{default:e.withCtx(()=>[o[3]||(o[3]=e.createElementVNode("i",{"aria-hidden":!0,class:"cyicon-table-sort cyw-text-f10 cyw-px-2 cyw-mr-1"},null,-1)),e.createElementVNode("span",null,e.toDisplayString(b.value),1),e.createElementVNode("span",g,e.toDisplayString(w.value),1),e.createElementVNode("i",{"aria-hidden":!0,class:e.normalizeClass(`cyicon-chevron-filled-${t.visible?"up":"down"} cyw-sort-chevron cyw-text-f10 cyw-px-2`)},null,2)]),_:1},16,["aria-expanded"])]),default:e.withCtx(({close:d})=>[e.createElementVNode("div",h,[e.createElementVNode("div",N,[e.createElementVNode("div",C,e.toDisplayString(e.unref(i.LABELS).sort),1),e.createVNode(c._sfc_main,e.mergeProps({size:"sm",type:"tertiary",subtype:"subtle",class:"cyw-px-2",style:{"min-width":"auto"}},{...e.unref(s.generateTestId)(e.unref(a),"sort-clear")},{onClick:l=>{S(),d()}}),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(i.LABELS).reset),1)]),_:2},1040,["onClick"])]),e.createElementVNode("div",E,[e.createVNode(m.default,e.mergeProps({modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=l=>t.value=l),class:"cyw-flex-grow-1 cyw-mr-3",size:"md",identifier:r.identifier,"value-identifier":r.valueIdentifier,placeholder:e.unref(i.LABELS)["sort-column-label"],"hide-clear":!0,"float-label":!1,data:r.options},{...e.unref(s.generateTestId)(e.unref(a),"sort-value")}),null,16,["modelValue","identifier","value-identifier","placeholder","data"]),e.createVNode(m.default,e.mergeProps({modelValue:t.order,"onUpdate:modelValue":o[1]||(o[1]=l=>t.order=l),style:{minWidth:"35%"},size:"md",identifier:"id","value-identifier":"label",placeholder:e.unref(i.LABELS)["sort-order-label"],"hide-clear":!0,"float-label":!1,"is-value-key":!0,data:e.unref(i.SORT_OPTIONS)},{...e.unref(s.generateTestId)(e.unref(a),"sort-type")}),{value:e.withCtx(({value:l})=>[l?(e.openBlock(),e.createElementBlock("span",L,[e.createElementVNode("i",{"aria-hidden":!0,class:e.normalizeClass(["cyw-text-f12 cyw-mr-2",l?.icon])},null,2),e.createTextVNode(" "+e.toDisplayString(l?.label),1)])):e.createCommentVNode("v-if",!0)]),_:1},16,["modelValue","placeholder","data"])]),e.createElementVNode("div",B,[e.createVNode(c._sfc_main,e.mergeProps({size:"sm",class:"cyw-px-2",disabled:!(t.value[r.identifier]&&t.order)},{...e.unref(s.generateTestId)(e.unref(a),"sort-apply")},{onClick:l=>{y(),d()}}),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(i.LABELS).apply),1)]),_:2},1040,["disabled","onClick"])])])]),_:1},16,["parent"]))}});exports._sfc_main=T;
//# sourceMappingURL=CySort.vue_vue_type_script_setup_true_lang-564277f3.cjs.map

{"version":3,"file":"index.cjs","sources":["../../../../src/components/table/bulk-selector/index.vue?vue&type=script&setup=true&lang.ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withCtx as _withCtx, createVNode as _createVNode, normalizeClass as _normalizeClass, renderSlot as _renderSlot, createCommentVNode as _createCommentVNode, resolveDynamicComponent as _resolveDynamicComponent, mergeProps as _mergeProps, createBlock as _createBlock, unref as _unref } from \"vue\"\n\nconst _hoisted_1 = {\n  class: \"cyw-round-top-lg\",\n  \"aria-label\": \"bulk-actions\"\n}\nconst _hoisted_2 = { class: \"cyw-table-bulk-selector-container cyw-flex-between-center cyw-mb-3 cyw-h-100 cyw-round-top-lg\" }\nconst _hoisted_3 = { class: \"cyw-flex-start-center cyw-table-bulk-selector__label cyw-flex-grow-1\" }\nconst _hoisted_4 = {\n  class: \"cyw-text-f12\",\n  \"data-testid\": \"selection-length\"\n}\nconst _hoisted_5 = { class: \"cyw-text-f12 cyw-text-medium\" }\nconst _hoisted_6 = { class: \"cyw-text-f12\" }\nconst _hoisted_7 = { class: \"cyw-text-f12 cyw-flex-center\" }\nconst _hoisted_8 = {\n  key: 0,\n  class: \"cyw-p-3\"\n}\n\nimport CyButton from \"../../button/CyButton.vue\";\nimport { computed, defineAsyncComponent, reactive, ref } from \"vue\";\nimport CyPopper from \"../../popper/CyPopper.vue\";\nimport { BulkActionsProps, BulkActionsList, BulkActionState } from \"./types\";\nimport { ActionData } from \"../../quick-actions/types\";\nimport CyTooltip from \"../../tooltip/CyTooltip.vue\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{\n  name: \"CyBulkSelector\"\n},\n  __name: 'index',\n  props: {\n    actions: {},\n    total: {},\n    selection: {},\n    text: {},\n    config: { default: () => ({}) },\n    labels: {},\n    dataTestid: { default: \"\" }\n  },\n  emits: [\"apply\", \"clear\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst CyQuickActions = defineAsyncComponent(\n  () => import(\"../../quick-actions/CyQuickActions.vue\")\n);\n\n\n\nconst $emits = __emit;\n\nconst props = __props;\n\nconst state = reactive<BulkActionState>({\n  currentAction: null,\n  actionType: null,\n  actionButtonRef: null\n});\n\nconst bulkActionRef = ref<{ $el?: HTMLElement } | null>(null);\n\nconst actions = computed<BulkActionsList>(() => {\n  const actionsEntries = Object.entries(props.actions || {}).map(\n    ([key, config]) => ({ key, ...config })\n  );\n  return {\n    open: actionsEntries?.filter?.((_, i) => i < 3) ?? [],\n    closed:\n      actionsEntries.length > 3\n        ? Object.fromEntries(\n            actionsEntries\n              ?.filter((_, i) => i >= 3)\n              .map(({ key, ...config }) => [key, config]) ?? {}\n          )\n        : null\n  };\n});\n\nfunction applyAction(action: ActionData) {\n  $emits(\"apply\", action);\n  if(!action?.props?.saveSelectionOnClick) {\n    $emits(\"clear\");\n  }\n}\n\nfunction isActionDisabled(action: ActionData) {\n  const { disabled = false } = action as { disabled: boolean | Function };\n  if (typeof disabled === \"function\") return disabled(action);\n  if(action?.props?.maxSelectionLimit && props.selection?.length > action?.props?.maxSelectionLimit){\n    return true;\n  }\n  return disabled;\n}\n\nfunction toggleQuickAction() {\n  if (!state.actionType) {\n    state.actionType = \"bulk\";\n    state.actionButtonRef = bulkActionRef.value?.$el;\n  } else resetPopper();\n}\n\nfunction resetPopper() {\n  state.actionType = null;\n  state.currentAction = null;\n  state.actionButtonRef = null;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"span\", _hoisted_5, _toDisplayString(props.selection?.length ?? 0), 1 /* TEXT */),\n          _cache[1] || (_cache[1] = _createTextVNode(\" Selected \"))\n        ]),\n        _createElementVNode(\"ul\", {\n          class: _normalizeClass([\"cyw-px-3 cyw-grid cyw-grid-gap-3 cyw-list-unstyled\", `cyw-grid-col-${actions.value.open?.length}`]),\n          role: \"menu\"\n        }, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(actions.value.open, (action) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              key: action.key,\n              role: \"menuitem\"\n            }, [\n              _createVNode(CyTooltip, {\n                content: isActionDisabled(action) ?  action?.props?.limitMsg : action.label,\n                disabled: !isActionDisabled(action),\n                placement: \"top\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(CyButton, {\n                    ref_for: true,\n                    ref: \"actionRef\",\n                    size: \"sm\",\n                    type: \"secondary\",\n                    \"aria-label\": action.label,\n                    class: \"cyw-flex-center cyw-w-100 cyw-px-3 cyw-py-2\",\n                    \"data-testaction\": `${action.key}-bulk`,\n                    \"data-testid\": `${props.dataTestid}-${action.key}-bulk-action`,\n                    disabled: isActionDisabled(action),\n                    onClick: ($event: any) => (applyAction(action))\n                  }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"span\", _hoisted_6, _toDisplayString(action.label), 1 /* TEXT */)\n                    ]),\n                    _: 2 /* DYNAMIC */\n                  }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"aria-label\", \"data-testaction\", \"data-testid\", \"disabled\", \"onClick\"])\n                ]),\n                _: 2 /* DYNAMIC */\n              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"content\", \"disabled\"])\n            ]))\n          }), 128 /* KEYED_FRAGMENT */))\n        ], 2 /* CLASS */),\n        (props.config.showBulkActions && actions.value.closed)\n          ? _renderSlot(_ctx.$slots, \"bulk-actions\", { key: 0 }, () => [\n              _createVNode(CyButton, {\n                ref_key: \"bulkActionRef\",\n                ref: bulkActionRef,\n                type: \"secondary\",\n                subtype: \"subtle\",\n                class: _normalizeClass(['cyw-px-3 cyw-py-2', props.config.class]),\n                \"aria-label\": props.labels['more-actions'],\n                size: props.config.size || 'sm',\n                onClick: toggleQuickAction\n              }, {\n                default: _withCtx(() => [\n                  _renderSlot(_ctx.$slots, \"title\", {}, () => [\n                    _createElementVNode(\"span\", _hoisted_7, [\n                      _createTextVNode(_toDisplayString(props.labels[\"more-actions\"]) + \" \", 1 /* TEXT */),\n                      _createElementVNode(\"span\", {\n                        \"aria-hidden\": true,\n                        class: _normalizeClass([\"cyw-ml-3 cyw-text-f10\", [\n                    state.actionType === 'bulk'\n                      ? 'cyicon-chevron-filled-up'\n                      : 'cyicon-chevron-filled-down'\n                  ]])\n                      }, null, 2 /* CLASS */)\n                    ])\n                  ])\n                ]),\n                _: 3 /* FORWARDED */\n              }, 8 /* PROPS */, [\"class\", \"aria-label\", \"size\"])\n            ])\n          : _createCommentVNode(\"v-if\", true)\n      ]),\n      _createElementVNode(\"div\", null, [\n        _createVNode(CyButton, {\n          size: \"sm\",\n          type: \"tertiary\",\n          subtype: \"subtle\",\n          \"aria-label\": \"clear selection\",\n          class: \"cyw-flex-center cyw-w-100 cyw-px-3 cyw-py-2\",\n          \"data-testaction\": \"clear-bulk\",\n          \"data-testid\": `${props.dataTestid}-clear-bulk-selection`,\n          onClick: _cache[0] || (_cache[0] = ($event: any) => ($emits('clear')))\n        }, {\n          default: _withCtx(() => _cache[2] || (_cache[2] = [\n            _createTextVNode(\" Clear Selection \")\n          ])),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"data-testid\"])\n      ])\n    ]),\n    _createVNode(CyPopper, {\n      virtual: true,\n      reference: state.actionButtonRef,\n      \"force-show\": !!state.actionButtonRef,\n      onForceHide: resetPopper,\n      placement: \"bottom-end\"\n    }, {\n      default: _withCtx(({ close, update }) => [\n        (state.actionType === 'single')\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n              (_openBlock(), _createBlock(_resolveDynamicComponent(state.currentAction?.name), _mergeProps({\n                style: {\n              width: `${state.currentAction?.width}px`,\n              height: `${state.currentAction?.height}px`\n            }\n              }, state.currentAction?.props), null, 16 /* FULL_PROPS */, [\"style\"]))\n            ]))\n          : (_openBlock(), _createBlock(_unref(CyQuickActions), {\n              key: 1,\n              actions: actions.value.closed || {},\n              details: props.selection,\n              onUpdatePopper: update,\n              onVnodeMounted: update,\n              onActionClick: ($event: any) => {\n            applyAction($event);\n            close();\n          }\n            }, null, 8 /* PROPS */, [\"actions\", \"details\", \"onUpdatePopper\", \"onVnodeMounted\", \"onActionClick\"]))\n      ]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"reference\", \"force-show\"])\n  ]))\n}\n}\n\n})"],"names":["_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_sfc_main","_defineComponent","__props","__emit","CyQuickActions","defineAsyncComponent","$emits","props","state","reactive","bulkActionRef","ref","actions","computed","actionsEntries","key","config","_","i","applyAction","action","isActionDisabled","disabled","toggleQuickAction","resetPopper","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","_createTextVNode","_normalizeClass","_Fragment","_renderList","_createVNode","CyTooltip","_withCtx","CyButton","$event","_renderSlot","_createCommentVNode","CyPopper","close","update","_createBlock","_resolveDynamicComponent","_mergeProps","_unref"],"mappings":"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"}
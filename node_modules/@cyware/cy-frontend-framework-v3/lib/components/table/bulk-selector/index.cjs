"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),u=require("../../../CyButton.vue_vue_type_script_setup_true_lang-33e4d3d7.cjs"),k=require("../../../CyPopper.vue_vue_type_script_setup_true_lang-f8d24da6.cjs"),g=require("../../../CyTooltip.vue_vue_type_script_setup_true_lang-f48e6aa4.cjs"),x={class:"cyw-round-top-lg","aria-label":"bulk-actions"},v={class:"cyw-table-bulk-selector-container cyw-flex-between-center cyw-mb-3 cyw-h-100 cyw-round-top-lg"},h={class:"cyw-flex-start-center cyw-table-bulk-selector__label cyw-flex-grow-1"},C={class:"cyw-text-f12","data-testid":"selection-length"},V={class:"cyw-text-f12 cyw-text-medium"},B={class:"cyw-text-f12"},N={class:"cyw-text-f12 cyw-flex-center"},A={key:0,class:"cyw-p-3"},E=e.defineComponent({name:"CyBulkSelector",__name:"index",props:{actions:{},total:{},selection:{},text:{},config:{default:()=>({})},labels:{},dataTestid:{default:""}},emits:["apply","clear"],setup(f,{emit:m}){const _=e.defineAsyncComponent(()=>Promise.resolve().then(()=>require("../../quick-actions/CyQuickActions.cjs"))),i=m,c=f,n=e.reactive({currentAction:null,actionType:null,actionButtonRef:null}),d=e.ref(null),s=e.computed(()=>{const o=Object.entries(c.actions||{}).map(([l,t])=>({key:l,...t}));return{open:o?.filter?.((l,t)=>t<3)??[],closed:o.length>3?Object.fromEntries(o?.filter((l,t)=>t>=3).map(({key:l,...t})=>[l,t])??{}):null}});function p(o){i("apply",o),o?.props?.saveSelectionOnClick||i("clear")}function a(o){const{disabled:l=!1}=o;return typeof l=="function"?l(o):o?.props?.maxSelectionLimit&&c.selection?.length>o?.props?.maxSelectionLimit?!0:l}function w(){n.actionType?y():(n.actionType="bulk",n.actionButtonRef=d.value?.$el)}function y(){n.actionType=null,n.currentAction=null,n.actionButtonRef=null}return(o,l)=>(e.openBlock(),e.createElementBlock("section",x,[e.createElementVNode("div",v,[e.createElementVNode("div",h,[e.createElementVNode("div",C,[e.createElementVNode("span",V,e.toDisplayString(c.selection?.length??0),1),l[1]||(l[1]=e.createTextVNode(" Selected "))]),e.createElementVNode("ul",{class:e.normalizeClass(["cyw-px-3 cyw-grid cyw-grid-gap-3 cyw-list-unstyled",`cyw-grid-col-${s.value.open?.length}`]),role:"menu"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value.open,t=>(e.openBlock(),e.createElementBlock("li",{key:t.key,role:"menuitem"},[e.createVNode(g._sfc_main,{content:a(t)?t?.props?.limitMsg:t.label,disabled:!a(t),placement:"top"},{default:e.withCtx(()=>[e.createVNode(u._sfc_main,{ref_for:!0,ref:"actionRef",size:"sm",type:"secondary","aria-label":t.label,class:"cyw-flex-center cyw-w-100 cyw-px-3 cyw-py-2","data-testaction":`${t.key}-bulk`,"data-testid":`${c.dataTestid}-${t.key}-bulk-action`,disabled:a(t),onClick:r=>p(t)},{default:e.withCtx(()=>[e.createElementVNode("span",B,e.toDisplayString(t.label),1)]),_:2},1032,["aria-label","data-testaction","data-testid","disabled","onClick"])]),_:2},1032,["content","disabled"])]))),128))],2),c.config.showBulkActions&&s.value.closed?e.renderSlot(o.$slots,"bulk-actions",{key:0},()=>[e.createVNode(u._sfc_main,{ref_key:"bulkActionRef",ref:d,type:"secondary",subtype:"subtle",class:e.normalizeClass(["cyw-px-3 cyw-py-2",c.config.class]),"aria-label":c.labels["more-actions"],size:c.config.size||"sm",onClick:w},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"title",{},()=>[e.createElementVNode("span",N,[e.createTextVNode(e.toDisplayString(c.labels["more-actions"])+" ",1),e.createElementVNode("span",{"aria-hidden":!0,class:e.normalizeClass(["cyw-ml-3 cyw-text-f10",[n.actionType==="bulk"?"cyicon-chevron-filled-up":"cyicon-chevron-filled-down"]])},null,2)])])]),_:3},8,["class","aria-label","size"])]):e.createCommentVNode("v-if",!0)]),e.createElementVNode("div",null,[e.createVNode(u._sfc_main,{size:"sm",type:"tertiary",subtype:"subtle","aria-label":"clear selection",class:"cyw-flex-center cyw-w-100 cyw-px-3 cyw-py-2","data-testaction":"clear-bulk","data-testid":`${c.dataTestid}-clear-bulk-selection`,onClick:l[0]||(l[0]=t=>i("clear"))},{default:e.withCtx(()=>l[2]||(l[2]=[e.createTextVNode(" Clear Selection ")])),_:1},8,["data-testid"])])]),e.createVNode(k._sfc_main,{virtual:!0,reference:n.actionButtonRef,"force-show":!!n.actionButtonRef,onForceHide:y,placement:"bottom-end"},{default:e.withCtx(({close:t,update:r})=>[n.actionType==="single"?(e.openBlock(),e.createElementBlock("div",A,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.currentAction?.name),e.mergeProps({style:{width:`${n.currentAction?.width}px`,height:`${n.currentAction?.height}px`}},n.currentAction?.props),null,16,["style"]))])):(e.openBlock(),e.createBlock(e.unref(_),{key:1,actions:s.value.closed||{},details:c.selection,onUpdatePopper:r,onVnodeMounted:r,onActionClick:b=>{p(b),t()}},null,8,["actions","details","onUpdatePopper","onVnodeMounted","onActionClick"]))]),_:1},8,["reference","force-show"])]))}});exports.default=E;
//# sourceMappingURL=index.cjs.map

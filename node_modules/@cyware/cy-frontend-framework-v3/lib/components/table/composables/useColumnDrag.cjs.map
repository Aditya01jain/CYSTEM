{"version":3,"file":"useColumnDrag.cjs","sources":["../../../../src/components/table/composables/useColumnDrag.js"],"sourcesContent":["import { computed, nextTick, onBeforeUnmount, ref, toRef } from \"vue\";\nimport { useDebounce } from \"../../../composables/useDebounce.js\";\n\nexport default (options) => {\n  const modelScope = toRef(options.modelScope);\n  const isDragEnabled = toRef(options.isDragEnabled);\n  const debouncer = useDebounce({\n    triggers: {\n      rowDrag: { trigger: initRowDrag, timer: 500 }\n    }\n  });\n\n  const rowSortable = ref(null);\n\n  onBeforeUnmount(() => {\n    rowSortable.value?.destroy();\n    rowSortable.value = null;\n  });\n\n  function debounceRowDrag(tableConfig) {\n    if (!tableConfig?.rowDraggable) return;\n    debouncer.initDebounce(\"rowDrag\");\n  }\n  async function initRowDrag() {\n    if (!isDragEnabled.value) return;\n    if (!rowSortable.value) {\n      await nextTick(async () => {\n        const response = await import(\"../models/RowDraggable.js\");\n        rowSortable.value = new response.default({\n          el: modelScope.value.el,\n          data: modelScope.value.data,\n          ...options.methods\n        });\n      });\n    } else rowSortable.value.reinit();\n  }\n  function reinitRowDrag(fixed) {\n    if (!rowSortable.value) return;\n    if (rowSortable.value?.isFixed !== fixed) rowSortable.value?.reinit();\n  }\n\n  return {\n    rowSortable: computed(() => rowSortable.value),\n    initRowDrag,\n    reinitRowDrag,\n    debounceRowDrag\n  };\n};\n"],"names":["useColumnDrag","options","modelScope","toRef","isDragEnabled","debouncer","useDebounce","initRowDrag","rowSortable","ref","onBeforeUnmount","debounceRowDrag","tableConfig","nextTick","response","reinitRowDrag","fixed","computed"],"mappings":"qLAGeA,EAACC,GAAY,CAC1B,MAAMC,EAAaC,EAAAA,MAAMF,EAAQ,UAAU,EACrCG,EAAgBD,EAAAA,MAAMF,EAAQ,aAAa,EAC3CI,EAAYC,EAAAA,YAAY,CAC5B,SAAU,CACR,QAAS,CAAE,QAASC,EAAa,MAAO,GAAK,CAC9C,CACL,CAAG,EAEKC,EAAcC,MAAI,IAAI,EAE5BC,EAAAA,gBAAgB,IAAM,CACpBF,EAAY,OAAO,UACnBA,EAAY,MAAQ,IACxB,CAAG,EAED,SAASG,EAAgBC,EAAa,CAC/BA,GAAa,cAClBP,EAAU,aAAa,SAAS,CACjC,CACD,eAAeE,GAAc,CACtBH,EAAc,QACdI,EAAY,MASVA,EAAY,MAAM,SARvB,MAAMK,EAAQ,SAAC,SAAY,CACzB,MAAMC,EAAW,MAAM,QAAO,QAAA,EAAA,KAAA,IAAA,QAAA,4BAA2B,GACzDN,EAAY,MAAQ,IAAIM,EAAS,QAAQ,CACvC,GAAIZ,EAAW,MAAM,GACrB,KAAMA,EAAW,MAAM,KACvB,GAAGD,EAAQ,OACrB,CAAS,CACT,CAAO,EAEJ,CACD,SAASc,EAAcC,EAAO,CACvBR,EAAY,OACbA,EAAY,OAAO,UAAYQ,GAAOR,EAAY,OAAO,QAC9D,CAED,MAAO,CACL,YAAaS,EAAQ,SAAC,IAAMT,EAAY,KAAK,EAC7C,YAAAD,EACA,cAAAQ,EACA,gBAAAJ,CACJ,CACA"}
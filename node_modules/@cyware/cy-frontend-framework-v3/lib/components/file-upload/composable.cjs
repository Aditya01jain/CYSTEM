"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const g=require("../../utilities/shared.cjs"),f=require("../../utilities/file.cjs");function y(u,s){const c=(t,l)=>{const e=t.target.files;if(!e?.length)return;s.setFileParams("data",e[0]);const r=u.value.data?.size;let i;r&&(i=f.getBytes(r)),s.setFileParams("fileSize",i),n(e[0],l)},n=(t,l)=>{const e=new FileReader;if(u.value.config?.fileType!="url"){e.onload=()=>{s.setFileParams("file",e.result),l()},e.readAsText(t);return}let r=!1;const i=f.fileType(t);i?e.readAsDataURL(t):e.readAsText(t,"UTF-8"),e.onload=()=>{const o=e.result;try{let a=o;if(!i)a=g.btoa(o);else{const d=o?.toString().split(",");d?.length===2&&(a=d[1])}s.setFileParams("file",a)}catch{r=!0}r||l()}};return{readFile:n,uploadFile:c}}exports.default=y;
//# sourceMappingURL=composable.cjs.map

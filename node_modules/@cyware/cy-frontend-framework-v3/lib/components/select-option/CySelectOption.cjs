"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),k=require("../tooltip/index.cjs"),_=require("../flex-text/index.cjs"),C=require("../checkbox/index.cjs"),d=require("../../utilities/shared.cjs"),B=require("../../prototypes/keyHandler/index.cjs"),w=require("../../utilities/prototypes.cjs"),N=require("../../utilities/bind-attributes.cjs"),V=["tabindex","role","disabled"],O={class:"cyw-select-popper-text"},q={key:0},E={key:1},$=Object.assign({name:"CySelectOption",inheritAttrs:!1},{__name:"CySelectOption",props:{optionStyle:{default:()=>{},type:Object},optionClass:{default:"",type:String},optionProps:{default:null,type:Object},option:{default:null,type:[Object,String,Number,Boolean]},tabindex:{default:()=>0,type:[Number,String]},role:{default:()=>"menuitem",type:[String]},options:{default:()=>({}),type:Object},placement:{default:()=>"bottom",type:String},disabled:{default:!1,type:[Boolean,Function]},disabledClass:{default:"",type:String},valueIdentifier:{default:null,type:[String]},subHeadingKey:{default:"",type:String},value:{default:null,type:[String,Object,Boolean,Number,Array]},multiple:{default:!1,type:Boolean},identifier:{default:null,type:String}},emits:["click"],setup(c,{expose:b,emit:v}){const g=e.useSlots(),p=e.useAttrs(),r=e.ref(null),h=v,a=e.reactive({render:!1,componentId:d.uuId()}),t=c,f=e.computed(()=>t.valueIdentifier?.length?t.option?.[t.valueIdentifier]:t.option),s=e.computed(()=>t.option?.[t.subHeadingKey]||t.subHeadingKey),i=e.computed(()=>typeof t.disabled=="function"?t.disabled():t.disabled),S=e.computed(()=>{let o={...p||{}};return["option"].includes(t.role)&&(o["aria-selected"]=u.value.toString()),g?.option?.length||(o["aria-labelledby"]=`option-content-${a.componentId}`),o}),u=e.computed(()=>{const o=!!p["data-selection"]||!1;if(d.isNull(t.value))return o;const l=d.isDataEmpty(t.option),n=t.identifier;return t.multiple?Array.isArray(t.value)?t.identifier?t.value.some(y=>l?!1:[y[n],y].includes(t.option[n])):t.value.includes(t.option):!1:n?t.value&&!l&&t.option[n]===t.value[n]||t.option[n]===t.value:t.value===t.option}),m=o=>{if(i?.value){o?.stopPropagation();return}t.multiple&&o?.stopPropagation();let l=d.isDataEmpty(t.option)?[o]:[t.option,o];h("click",...l)},x=()=>{let o=!1;if(r.value?.$el){const l=r?.value?.$el.querySelector('[data-heading="text"]'),n=r?.value?.$el.querySelector('[data-heading="subtext"]');o=l?l.offsetWidth<l.scrollWidth:!1,o=o||(n?n.offsetWidth<n.scrollWidth:!1)}a.render=!o};return b({click:m,disabled:i,isOptionSelected:u}),(o,l)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({tabindex:i.value?-1:t.tabindex,role:t.role,name:"select-option",class:["cyw-select-option cyw-flex-start-center cyw-my-2",[t.optionClass,{" cyw-select-option--selected ":u.value," cyw-select-option--disabled":i.value}]],style:t.optionStyle},{...S.value,...e.unref(N.generateTestId)(e.unref(p),"select-option")},{disabled:i.value},e.toHandlers(e.unref(B.default)(m),!0)),[t.multiple&&!t.options.noCheckbox?(e.openBlock(),e.createBlock(e.unref(C.CyCheckbox),{key:0,modelValue:u.value,name:"checkbox",showLabel:!1,"aria-hidden":!0,tabindex:-1,class:"cyw-mr-3 cyw-pointer-events",inputClass:"cyw-mt-0",disabled:i.value},null,8,["modelValue","disabled"])):e.createCommentVNode("v-if",!0),e.renderSlot(o.$slots,"default",{},()=>[e.createVNode(e.unref(k.CyTooltip),{onVnodeMounted:x,"open-delay":5,ref_key:"optionRef",ref:r,offset:0,disabled:i.value||a.render,tabindex:a.render?-1:0,enterable:!1,"visible-arrow":!1,placement:t.optionPlacement||"bottom","popper-class":"cyw-select-popper-container"},{content:e.withCtx(()=>[e.createElementVNode("div",O,[e.renderSlot(o.$slots,"content",{},()=>[e.createElementVNode("span",null,e.toDisplayString(f.value),1),s.value?(e.openBlock(),e.createElementBlock("br",q)):e.createCommentVNode("v-if",!0),s.value?(e.openBlock(),e.createElementBlock("span",E,e.toDisplayString(s.value),1)):e.createCommentVNode("v-if",!0)])])]),default:e.withCtx(()=>[e.renderSlot(o.$slots,"option",{},()=>[c.option?(e.openBlock(),e.createBlock(e.unref(_.CyFlexText),{key:0,id:`option-content-${a.componentId}`,heading:f.value,subHeading:s.value,direction:e.unref(w.getProp)(c.optionProps,"flexAlign")},null,8,["id","heading","subHeading","direction"])):e.createCommentVNode("v-if",!0)])]),_:3},8,["disabled","tabindex","placement"])])],16,V))}});exports.default=$;
//# sourceMappingURL=CySelectOption.cjs.map

{"version":3,"file":"Toaster.vue_vue_type_script_setup_true_lang-c1118f66.cjs","sources":["../src/components/toaster/Toaster.vue?vue&type=script&setup=true&lang.ts"],"sourcesContent":["import { mergeDefaults as _mergeDefaults, defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createVNode as _createVNode, mergeProps as _mergeProps, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = [\"aria-label\"]\n\nimport { computed, onMounted, nextTick, onBeforeUnmount, ref } from \"vue\";\nimport type { ToasterProps } from \"./types\";\nimport CySanitizeHtml from \"../../components/sanitize-html\";\nimport { ICON_MAP, DEFAULT_TOASTER_PROPS } from \"./variables\";\nimport { DATA_LABELS } from \"../banner/variables\";\nimport { generateTestId } from \"../../utilities/bind-attributes\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{\n  name: \"CyToaster\",\n  inheritAttrs: false\n},\n  __name: 'Toaster',\n  props: /*@__PURE__*/_mergeDefaults({\n    type: {},\n    title: {},\n    message: {},\n    placement: {},\n    status: {},\n    toasterId: {},\n    clickableText: {},\n    duration: {},\n    func: { type: Function },\n    funcOnClose: { type: Function }\n  }, DEFAULT_TOASTER_PROPS),\n  emits: [\"close\"],\n  setup(__props: any, { emit: __emit }) {\n\n\n\nconst props = __props;\n\nlet time = ref<number>(0);\n\nconst emits = __emit;\n\nonMounted(() => {\n  init();\n});\n\nonBeforeUnmount(() => {\n  if (props.clickableText && props.func) {\n    const el: HTMLElement | null = document.querySelector(\n      `.clickable-text-${props.toasterId}`\n    )?.[0];\n    el?.removeEventListener(\"click\", props.func);\n  }\n});\n\nconst isTypeLinear = computed<boolean>(() => props.type === \"linear\");\nconst progress = computed<string>(\n  () => `${(time.value / props.duration) * 100}%`\n);\n\nfunction init() {\n  if (props.duration) calculateProgress();\n  nextTick(() => {\n    if (props.clickableText && props.func) {\n      const el: HTMLElement | null = document.querySelector(\n        `.clickable-text-${props.toasterId}`\n      );\n      el?.addEventListener(\"click\", props.func);\n    }\n  });\n}\n\nconst formattedMessage = computed(() => {\n  if (props.clickableText) {\n    const clickableTextIndex = props.message?.indexOf(props.clickableText);\n    if (clickableTextIndex !== -1) {\n      return `${props.message.substring(0, clickableTextIndex)}<a class=\"cyw-toaster__clickable-text clickable-text-${props.toasterId}\">${props.clickableText}</a>${props.message.substring(clickableTextIndex + props.clickableText.length)}`;\n    }\n  }\n  return props.message;\n});\n\nfunction calculateProgress() {\n  time.value += 10;\n  if (time.value < props.duration) {\n    setTimeout(() => {\n      calculateProgress();\n    }, 10);\n  }\n}\n\nfunction onClose() {\n  if (props.funcOnClose ) {\n    props.funcOnClose()\n  }\n  emits(\"close\", props.toasterId);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _mergeProps({ ..._ctx.$attrs, ..._unref(generateTestId)(_ctx.$attrs, 'toaster') }, {\n      role: \"alert\",\n      \"aria-live\": \"assertive\",\n      \"aria-atomic\": \"true\",\n      \"aria-relevant\": \"additions\",\n      class: [\"cyw-toaster__group cyw-bg-N10 cyw-flex-align-center cyw-flex-justify-start cyw-round-md\", `cyw-toaster--${props.status}`]\n    }), [\n      _createElementVNode(\"section\", {\n        class: _normalizeClass([\"cyw-toaster__content cyw-w-100 cyw-flex\", { 'cyw-flex-align-stretch': isTypeLinear.value }])\n      }, [\n        _createElementVNode(\"div\", {\n          \"aria-hidden\": \"true\",\n          class: _normalizeClass([\"cyw-toaster__status\", {\n          'cyw-flex-align-center cyw-flex-justify-center cyw-toaster__linear-icon':\n            isTypeLinear.value\n        }])\n        }, [\n          _createElementVNode(\"i\", {\n            class: _normalizeClass([_unref(ICON_MAP)[props.status], \"cyw-text-f20\"])\n          }, null, 2 /* CLASS */)\n        ], 2 /* CLASS */),\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\n          isTypeLinear.value\n            ? 'cyw-flex-align-center cyw-inline-flex'\n            : 'cyw-flex-column cyw-ml-4'\n        ])\n        }, [\n          _createElementVNode(\"header\", {\n            class: _normalizeClass([\"cyw-mr-3 cyw-text-f14 cyw-text-medium cyw-color-N900\", { 'cyw-ml-3': isTypeLinear.value }])\n          }, _toDisplayString(props.title), 3 /* TEXT, CLASS */),\n          _createVNode(_unref(CySanitizeHtml), {\n            class: _normalizeClass([\"cyw-text-f14 cyw-color-N700\", { 'cyw-mr-6': isTypeLinear.value }]),\n            text: formattedMessage.value\n          }, null, 8 /* PROPS */, [\"class\", \"text\"])\n        ], 2 /* CLASS */),\n        _createElementVNode(\"button\", _mergeProps({\n          class: [\"cyw-toaster__close cyw-cursor-pointer cyw-flex-justify-center\", {'cyw-flex-align-start cyw-mt-3': !isTypeLinear.value, 'cyw-flex-align-center': isTypeLinear.value}],\n          \"aria-label\": _unref(DATA_LABELS).close\n        }, {..._unref(generateTestId)(_ctx.$attrs, 'toaster-close-button')}, { onClick: onClose }), _cache[0] || (_cache[0] = [\n          _createElementVNode(\"i\", {\n            class: \"cyicon-cross cyw-text-f10 cyw-color-N700\",\n            \"aria-hidden\": \"true\"\n          }, null, -1 /* HOISTED */)\n        ]), 16 /* FULL_PROPS */, _hoisted_1)\n      ], 2 /* CLASS */)\n    ], 16 /* FULL_PROPS */),\n    (isTypeLinear.value)\n      ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 0,\n          class: _normalizeClass(`cyw-w-100 cyw-flex cyw-toaster__progress cyw-bg-N200 cyw-round-sm cyw-toaster--${props.status}`),\n          \"aria-hidden\": \"true\"\n        }, [\n          _createElementVNode(\"span\", {\n            style: _normalizeStyle({ width: progress.value }),\n            class: \"cyw-h-100 cyw-round-sm cyw-toaster__progress-bar\"\n          }, null, 4 /* STYLE */)\n        ], 2 /* CLASS */))\n      : _createCommentVNode(\"v-if\", true)\n  ], 64 /* STABLE_FRAGMENT */))\n}\n}\n\n})"],"names":["_hoisted_1","_sfc_main","_defineComponent","_mergeDefaults","DEFAULT_TOASTER_PROPS","__props","__emit","props","time","ref","emits","onMounted","init","onBeforeUnmount","isTypeLinear","computed","progress","calculateProgress","nextTick","formattedMessage","clickableTextIndex","onClose","_ctx","_cache","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_mergeProps","_unref","generateTestId","_normalizeClass","ICON_MAP","_toDisplayString","_createVNode","CySanitizeHtml","DATA_LABELS","_normalizeStyle","_createCommentVNode"],"mappings":"kOAGAA,EAAA,CAAA,YAAA,EAUAC,EAAAC,kBAAA,CACK,KAAA,YACG,aAAA,GAER,OAAA,UACU,MAAAC,EAAAA,cAAA,CAC2B,KAAA,CAAA,EAC1B,MAAA,CAAA,EACC,QAAA,CAAA,EACE,UAAA,CAAA,EACE,OAAA,CAAA,EACH,UAAA,CAAA,EACG,cAAA,CAAA,EACI,SAAA,CAAA,EACL,KAAA,CAAA,KAAA,QAAA,EACY,YAAA,CAAA,KAAA,QAAA,CACO,EAAAC,uBAAA,EACR,MAAA,CAAA,OAAA,EACT,MAAAC,EAAA,CAAA,KAAAC,CAAA,EAAA,CAKjB,MAAAC,EAAAF,EAEA,IAAAG,EAAAC,MAAA,CAAA,EAEA,MAAAC,EAAAJ,EAEAK,EAAAA,UAAA,IAAA,CACEC,GAAK,CAAA,EAGPC,EAAAA,gBAAA,IAAA,CACEN,EAAA,eAAAA,EAAA,MACE,SAAA,cAAwC,mBAAAA,EAAA,SAAA,EACJ,IAAA,CAAA,GAEpC,oBAAA,QAAAA,EAAA,IAAA,CACF,CAAA,EAGF,MAAAO,EAAAC,EAAAA,SAAA,IAAAR,EAAA,OAAA,QAAA,EACAS,EAAAD,EAAA,SAAiB,IAAA,GAAAP,EAAA,MAAAD,EAAA,SAAA,GAAA,GAC6B,EAG9C,SAAAK,GAAA,CACEL,EAAA,UAAoBU,IACpBC,EAAAA,SAAA,IAAA,CACEX,EAAA,eAAAA,EAAA,MACE,SAAA,cAAwC,mBAAAA,EAAA,SAAA,EACJ,GAEpC,iBAAA,QAAAA,EAAA,IAAA,CACF,CAAA,CACD,CAGH,MAAAY,EAAAJ,EAAAA,SAAA,IAAA,CACE,GAAAR,EAAA,cAAA,CACE,MAAAa,EAAAb,EAAA,SAAA,QAAAA,EAAA,aAAA,EACA,GAAAa,IAAA,GACE,MAAA,GAAAb,EAAA,QAAA,UAAA,EAAAa,CAAA,CAAA,wDAAAb,EAAA,SAAA,KAAAA,EAAA,aAAA,OAAAA,EAAA,QAAA,UAAAa,EAAAb,EAAA,cAAA,MAAA,CAAA,EACF,CAEF,OAAAA,EAAA,OAAa,CAAA,EAGf,SAAAU,GAAA,CACET,EAAA,OAAA,GACAA,EAAA,MAAAD,EAAA,UACE,WAAA,IAAA,CACEU,GAAkB,EAAA,EAAA,CAEtB,CAGF,SAAAI,GAAA,CACEd,EAAA,aACEA,EAAA,YAAA,EAEFG,EAAA,QAAAH,EAAA,SAAA,CAA8B,CAGhC,MAAA,CAAAe,EAAAC,KACEC,EAAAA,UAAA,EAAAC,EAAA,mBAAsBC,EAAA,SAAoB,KAAW,CAAMC,EAAA,mBACzD,MAAoBC,EAAAA,WAAA,CAAA,GAAAN,EAAA,OAAA,GAAAO,EAAAA,MAAAC,EAAA,cAAA,EAAAR,EAAA,OAAA,SAAA,CAAA,EAAA,CAA0F,KAAA,QACtG,YAAA,YACO,cAAA,OACE,gBAAA,YACE,MAAA,CAAA,0FAAA,gBAAAf,EAAA,MAAA,EAAA,CACgH,CAAA,EAClI,CAAGoB,EAAA,mBACF,UAAoB,CAAW,MAAAI,EAAA,eAAA,CAAA,0CAAA,CAAA,yBAAAjB,EAAA,KAAA,CAAA,CAAA,CACuF,EACtH,CAAGa,EAAA,mBACD,MAAoB,CAAO,cAAA,OACV,MAAAI,EAAAA,eAAA,CAAA,sBAAA,CACgC,yEAAAjB,EAAA,KAEhC,CAAA,CAAA,CACf,EACF,CAAGa,EAAA,mBACD,IAAoB,CAAK,MAAAI,EAAAA,eAAA,CAAAF,QAAAG,EAAAA,QAAA,EAAAzB,EAAA,MAAA,EAAA,cAAA,CAAA,CACgD,EACzE,KAAG,CAAM,CAAa,EACxB,CAAG,EAAaoB,EAAA,mBAChB,MAAoB,CAAO,MAAAI,EAAAA,eAAA,CACFjB,EAAA,MAAA,wCAAA,0BAGnB,CAAA,CACL,EACD,CAAGa,EAAA,mBACD,SAAoB,CAAU,MAAAI,EAAA,eAAA,CAAA,uDAAA,CAAA,WAAAjB,EAAA,KAAA,CAAA,CAAA,CACuF,EACrHmB,EAAA,gBAAA1B,EAAA,KAAA,EAA+B,CAAG,EAAmB2B,cAAAL,EAAAA,MAAAM,EAAAA,cAAA,EAAA,CAChB,MAAAJ,EAAA,eAAA,CAAA,8BAAA,CAAA,WAAAjB,EAAA,KAAA,CAAA,CAAA,EACuD,KAAAK,EAAA,KACnE,EAAA,KAAA,EAAA,CAAA,QAAA,MAAA,CAAA,CACgB,EAC3C,CAAG,EAAaQ,EAAA,mBAAA,SAAAC,aAAA,CAC0B,MAAA,CAAA,gEAAA,CAAA,gCAAA,CAAAd,EAAA,MAAA,wBAAAA,EAAA,MAAA,EACoI,aAAAe,EAAAA,MAAAO,EAAA,WAAA,EAAA,KAC1I,EAAA,CAAA,GAAAP,EAAAA,MAAAC,EAAA,cAAA,EAAAR,EAAA,OAAA,sBAAA,CAAA,EAAA,CAAA,QAAAD,CAAA,CAAA,EAAAE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CACkFI,EAAA,mBACpH,IAAoB,CAAK,MAAA,2CAChB,cAAA,MACQ,EACjB,KAAG,EAAM,CAAgB,GAAA,GAAA3B,CAAA,CACQ,EACrC,CAAG,CAAa,EAClB,EAAG,EAAmBc,EAAA,OAAAU,EAAA,UAAA,EAAAC,EAAA,mBAEH,MAAoB,CAAO,IAAA,EACnC,MAAAM,EAAA,eAAA,kFAAAxB,EAAA,MAAA,EAAA,EACkH,cAAA,MACxG,EACjB,CAAGoB,EAAA,mBACD,OAAoB,CAAQ,MAAAU,EAAAA,eAAA,CAAA,MAAArB,EAAA,KAAA,CAAA,EACsB,MAAA,kDACzC,EACT,KAAG,CAAM,CAAa,EACxB,CAAG,GAAAsB,EAAA,mBAAA,OAAA,EAAA,CAC6B,EACtC,EAAG,EACL,CAGA,CAAA"}
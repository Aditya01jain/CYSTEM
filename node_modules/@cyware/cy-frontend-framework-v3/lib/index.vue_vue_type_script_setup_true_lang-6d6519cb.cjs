"use strict";const e=require("vue"),B=require("./CyPopper.vue_vue_type_script_setup_true_lang-f8d24da6.cjs"),f=require("./CyButton.vue_vue_type_script_setup_true_lang-33e4d3d7.cjs"),E=require("./CySort.vue_vue_type_script_setup_true_lang-564277f3.cjs"),T=require("./ColumnSelector.vue_vue_type_script_setup_true_lang-b48d7738.cjs"),y=require("./CyTooltip.vue_vue_type_script_setup_true_lang-f48e6aa4.cjs"),$=require("./components/select-option/CySelectOption.cjs"),z=require("./prototypes/keyHandler/index.cjs"),u=require("./utilities/bind-attributes.cjs"),q={class:"cyw-text-f12 cyw-color-N600 cyw-flex-align-center cyw-flex-grow-1"},P={class:"cyw-color-N700 cyw-text-medium cyw-mr-2"},D={class:"cyw-text-f12 cyw-color-N600 cyw-flex-end-center"},I={class:"cyw-color-N600 cyw-text-f10"},R={key:0,class:"cyicon-check cyw-mr-2 cyw-pr-1 cyw-text-f10","aria-hidden":!0},g=10,H=e.defineComponent({name:"CyTableHeader",inheritAttrs:!1,__name:"index",props:{columns:{},visibleColumns:{},labels:{},config:{},pageSize:{},showRefresh:{type:Boolean}},emits:["page-change","sort-change","toggle-column","refresh"],setup(_,{emit:w}){const v={more:"18rem",sort:"40rem",columns:"22rem",default:"18rem"},i=e.useAttrs(),c=w,d=e.ref(null),r=e.ref({ref:null}),o=_,k=e.computed(()=>o.columns?.filter?.(t=>!!t.sort)||[]),h=e.computed(()=>(o.pageSize?.length?o.pageSize:[g,25,50,100]).map(n=>({id:n,name:`${n} items`}))),C=e.computed(()=>{const{total:t=1,page:n=1,pageSize:l=g}=o.config?.pagination||{};return`${1+l*(n-1)} - ${Math.min(n*l,t)}`}),p=e.computed(()=>o.config.pagination.maxLimit?o.config.pagination.maxLimit<=o.config.pagination.total:!1);function b(){const{helpText:t,maxLimit:n,total:l}=o.config.pagination;return typeof t=="function"?t({maxLimit:n,total:l}):t}function x(t=o.config.pagination?.pageSize){const n=t||o.config.pagination?.pageSize||1;o.config.pagination?.total&&Math.ceil(o.config.pagination?.total/n)>=1&&c("page-change",1,t)}function a(t){typeof t=="string"?r.value={ref:d.value?.querySelector?.(`#${t}-btn`)||null,type:t}:r.value={ref:null}}function N(t){c("sort-change",t)}function m(t){return t===o.config?.pagination?.pageSize}return(t,n)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"elRef",ref:d,class:"cyw-table-topbar cyw-py-3 cyw-pl-2 cyw-flex-align-center"},[e.createElementVNode("div",q,[e.createVNode(y._sfc_main,{placement:"top-start",disabled:!p.value,content:b()},{default:e.withCtx(()=>[e.createElementVNode("div",{class:e.normalizeClass({"cyw-cursor-pointer":p.value})},[e.createElementVNode("strong",P,e.toDisplayString(C.value),1),e.createTextVNode(" of "+e.toDisplayString(t.config?.pagination?.total)+" "+e.toDisplayString(p.value?"*":""),1)],2)]),_:1},8,["disabled","content"]),e.createVNode(f._sfc_main,e.mergeProps({dimension:2.4,id:"more-btn",type:"icon",subtype:"tertiary",class:["cyw-ml-2 cyw-lh-normal",{active:r.value.type==="more"}]},{...e.unref(u.generateTestId)(e.unref(i),"page-size")},{onClick:n[0]||(n[0]=l=>a("more"))}),{default:e.withCtx(()=>n[5]||(n[5]=[e.createElementVNode("i",{"aria-hidden":!0,class:"cyicon-more-vertical cyw-text-f10 cyw-px-1 cyw-lh-normal cyw-color-N700"},null,-1)])),_:1},16,["class"])]),e.createElementVNode("div",D,[e.createVNode(y._sfc_main,{placement:"top-start",content:"Refresh"},{default:e.withCtx(()=>[o.showRefresh?(e.openBlock(),e.createBlock(f._sfc_main,e.mergeProps({key:0,type:"tertiary",subtype:"icon",size:"lg",class:"cyw-mr-3","aria-label":"Refresh"},{...e.unref(u.generateTestId)(e.unref(i),"refresh")},{onClick:n[1]||(n[1]=l=>c("refresh"))}),{default:e.withCtx(()=>n[6]||(n[6]=[e.createElementVNode("div",{class:"cyw-flex-align-center"},[e.createElementVNode("i",{"aria-hidden":!0,class:"cyw-px-1 cyicon-refresh"})],-1)])),_:1},16)):e.createCommentVNode("v-if",!0)]),_:1}),o.config.showSort?(e.openBlock(),e.createBlock(E._sfc_main,e.mergeProps({key:0,options:k.value,defaultSort:o.config.sort},e.unref(i),{identifier:"key","onOn:sort":N}),null,16,["options","defaultSort"])):e.createCommentVNode("v-if",!0),t.config.selector.isVisible?(e.openBlock(),e.createBlock(f._sfc_main,e.mergeProps({key:1,id:"columns-btn",type:"tertiary",subtype:"subtle",class:["cyw-py-2 cyw-px-3",{active:r.value.type==="columns"}]},{...e.unref(u.generateTestId)(e.unref(i),"column")},{onClick:n[2]||(n[2]=l=>a("columns"))}),{default:e.withCtx(()=>[n[7]||(n[7]=e.createElementVNode("i",{"aria-hidden":!0,class:"cyicon-columns cyw-text-f10 cyw-px-2 cyw-mr-2"},null,-1)),e.createElementVNode("span",null,e.toDisplayString(t.labels.columns),1)]),_:1},16,["class"])):e.createCommentVNode("v-if",!0),e.renderSlot(t.$slots,"more-actions")]),e.createVNode(B._sfc_main,{placement:"bottom-start","popper-class":"cyw-table__sort-dropdown cyw-border","visible-arrow":!1,offset:[0,0],virtual:!0,reference:r.value.ref,"force-show":!!r.value.ref,"focus-options":{skipInitFocus:!0},onForceHide:n[4]||(n[4]=l=>a())},{reference:e.withCtx(()=>n[8]||(n[8]=[])),default:e.withCtx(({close:l,update:V})=>[e.createElementVNode("div",{class:e.normalizeClass({"cyw-p-3":r.value.type!=="columns"}),style:e.normalizeStyle({width:v[r.value.type||"default"]})},[r.value.type==="more"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("span",I,e.toDisplayString(t.labels["page-size-heading"]),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,s=>(e.openBlock(),e.createBlock($.default,e.mergeProps({key:s.id,class:"cyw-px-3 cyw-py-2","aria-label":s.name,ref_for:!0},{...e.unref(u.generateTestId)(e.unref(i),`size-${s.id}`)},e.toHandlers(e.unref(z.default)(S=>{l(),x(S)},s.id))),{default:e.withCtx(()=>[e.createElementVNode("div",{class:e.normalizeClass(["cyw-text-f12",{"cyw-color-P600":m(s.id)}])},[m(s.id)?(e.openBlock(),e.createElementBlock("i",R)):e.createCommentVNode("v-if",!0),e.createElementVNode("span",{class:e.normalizeClass({"cyw-pl-4":!m(s.id)})},e.toDisplayString(s.name),3)],2)]),_:2},1040,["aria-label"]))),128))],64)):r.value.type==="columns"?(e.openBlock(),e.createBlock(T._sfc_main,e.mergeProps({key:1,columns:t.columns,labels:t.labels},e.unref(i),{onVnodeMounted:V,onToggleColumn:n[3]||(n[3]=s=>c("toggle-column",s))}),{"column-selector":e.withCtx(()=>[e.renderSlot(t.$slots,"column-selector",{updateRefs:a})]),_:2},1040,["columns","labels","onVnodeMounted"])):e.createCommentVNode("v-if",!0)],6)]),_:3},8,["reference","force-show"])],512))}});exports._sfc_main=H;
//# sourceMappingURL=index.vue_vue_type_script_setup_true_lang-6d6519cb.cjs.map

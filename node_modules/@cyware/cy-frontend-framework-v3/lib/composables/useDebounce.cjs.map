{"version":3,"file":"useDebounce.cjs","sources":["../../src/composables/useDebounce.js"],"sourcesContent":["import { onBeforeUnmount, toRefs, ref, isRef } from \"vue\";\nimport { debounce } from \"radash\";\nimport { getRef } from \"../utilities/shared\";\n\nconst DEFAULT_DELAY = 500;\n\nexport function useDebounce(options) {\n  let triggers, config;\n  if (options?.triggers) {\n    triggers = getRef(options.triggers);\n  }\n  if (options?.config) {\n    config = isRef(options.config) ? toRefs(options.config) : options.config;\n  }\n\n  const debouncers = ref({});\n\n  onBeforeUnmount(() => {\n    removeDebounce();\n  });\n\n  const _getDebounceTimer = (key) => {\n    return config?.debounceTimer || triggers?.[key].timer || DEFAULT_DELAY;\n  };\n\n  const initDebounce = (key, params) => {\n    const trigger = triggers[key]?.trigger;\n    if (!trigger) return;\n    if (!debouncers.value[key])\n      debouncers.value[key] = debounce({ delay: _getDebounceTimer(key) }, () =>\n        trigger(params)\n      );\n    debouncers.value[key]();\n  };\n\n  const removeDebounce = (keys) => {\n    if (keys && !Array.isArray(keys)) keys = [keys];\n    (keys || Object.keys(debouncers.value)).forEach((key) => {\n      debouncers.value[key]?.cancel?.();\n      debouncers.value[key] = null;\n    });\n  };\n\n  return { initDebounce, removeDebounce };\n}\n"],"names":["DEFAULT_DELAY","useDebounce","options","triggers","config","getRef","isRef","toRefs","debouncers","ref","onBeforeUnmount","removeDebounce","_getDebounceTimer","key","initDebounce","params","trigger","debounce","keys"],"mappings":"gKAIMA,EAAgB,IAEf,SAASC,EAAYC,EAAS,CACnC,IAAIC,EAAUC,EACVF,GAAS,WACXC,EAAWE,EAAM,OAACH,EAAQ,QAAQ,GAEhCA,GAAS,SACXE,EAASE,EAAAA,MAAMJ,EAAQ,MAAM,EAAIK,SAAOL,EAAQ,MAAM,EAAIA,EAAQ,QAGpE,MAAMM,EAAaC,MAAI,CAAA,CAAE,EAEzBC,EAAAA,gBAAgB,IAAM,CACpBC,GACJ,CAAG,EAED,MAAMC,EAAqBC,GAClBT,GAAQ,eAAiBD,IAAWU,CAAG,EAAE,OAASb,EAGrDc,EAAe,CAACD,EAAKE,IAAW,CACpC,MAAMC,EAAUb,EAASU,CAAG,GAAG,QAC1BG,IACAR,EAAW,MAAMK,CAAG,IACvBL,EAAW,MAAMK,CAAG,EAAII,EAAAA,SAAS,CAAE,MAAOL,EAAkBC,CAAG,GAAK,IAClEG,EAAQD,CAAM,CACtB,GACIP,EAAW,MAAMK,CAAG,IACxB,EAEQF,EAAkBO,GAAS,CAC3BA,GAAQ,CAAC,MAAM,QAAQA,CAAI,IAAGA,EAAO,CAACA,CAAI,IAC7CA,GAAQ,OAAO,KAAKV,EAAW,KAAK,GAAG,QAASK,GAAQ,CACvDL,EAAW,MAAMK,CAAG,GAAG,SAAM,EAC7BL,EAAW,MAAMK,CAAG,EAAI,IAC9B,CAAK,CACL,EAEE,MAAO,CAAE,aAAAC,EAAc,eAAAH,EACzB"}
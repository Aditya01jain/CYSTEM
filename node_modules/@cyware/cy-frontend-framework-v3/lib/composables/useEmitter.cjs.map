{"version":3,"file":"useEmitter.cjs","sources":["../../src/composables/useEmitter.js"],"sourcesContent":["import { getCurrentInstance, computed } from 'vue';\n\nexport function useEmitter(parentComponentName) {\n  const instance = getCurrentInstance();\n\n  const isParent = computed(() => {\n    let parent = instance.proxy.$parent;\n    while (parent) {\n      if (parent.$.type.name !== parentComponentName) {\n        parent = parent.$parent;\n      } else {\n        instance.proxy._parent = parent.$.proxy;\n        return true;\n      }\n    }\n    return false;\n  });\n\n  const derivedProps = (key) => {\n    const parent = isParent.value ? instance.proxy._parent : instance.proxy;\n    return parent?.[key];\n  };\n\n  const emitFunction = (parent, eventName, params) => {\n    parent.$emit(eventName, ...(Array.isArray(params) ? params : [params]));\n  };\n\n  const dispatch = (componentName, eventName, params) => {\n    let parent = instance.proxy.$parent || instance.proxy.$root;\n    let name =parent.$?.type?.name;\n\n    while (parent && (!name || name !== componentName)) {\n      parent = parent.$parent;\n      if (parent) {\n        name = parent.$?.type?.name;\n      }\n    }\n\n    if (parent) {\n      emitFunction(parent, eventName, params);\n    }\n  };\n\n  const broadcast = (componentName, eventName, params) => {\n    const broadcastRecursive = (children) => {\n      children.forEach((child) => {\n        const name = child.$?.type?.name;\n        if (name === componentName) {\n          child.$emit(eventName, ...params);\n        } else {\n          broadcastRecursive(child.$children);\n        }\n      });\n    };\n\n    broadcastRecursive(instance.proxy.$children);\n  };\n\n  return {\n    isParent,\n    derivedProps,\n    dispatch,\n    broadcast,\n  };\n}\n"],"names":["useEmitter","parentComponentName","instance","getCurrentInstance","isParent","computed","parent","derivedProps","key","emitFunction","eventName","params","componentName","name","broadcastRecursive","children","child"],"mappings":"uGAEO,SAASA,EAAWC,EAAqB,CAC9C,MAAMC,EAAWC,EAAAA,qBAEXC,EAAWC,EAAAA,SAAS,IAAM,CAC9B,IAAIC,EAASJ,EAAS,MAAM,QAC5B,KAAOI,GACL,GAAIA,EAAO,EAAE,KAAK,OAASL,EACzBK,EAASA,EAAO,YAEhB,QAAAJ,EAAS,MAAM,QAAUI,EAAO,EAAE,MAC3B,GAGX,MAAO,EACX,CAAG,EAEKC,EAAgBC,IACLJ,EAAS,MAAQF,EAAS,MAAM,QAAUA,EAAS,SAClDM,CAAG,EAGfC,EAAe,CAACH,EAAQI,EAAWC,IAAW,CAClDL,EAAO,MAAMI,EAAW,GAAI,MAAM,QAAQC,CAAM,EAAIA,EAAS,CAACA,CAAM,CAAE,CAC1E,EAiCE,MAAO,CACL,SAAAP,EACA,aAAAG,EACA,SAlCe,CAACK,EAAeF,EAAWC,IAAW,CACrD,IAAIL,EAASJ,EAAS,MAAM,SAAWA,EAAS,MAAM,MAClDW,EAAMP,EAAO,GAAG,MAAM,KAE1B,KAAOA,IAAW,CAACO,GAAQA,IAASD,IAClCN,EAASA,EAAO,QACZA,IACFO,EAAOP,EAAO,GAAG,MAAM,MAIvBA,GACFG,EAAaH,EAAQI,EAAWC,CAAM,CAE5C,EAqBI,UAnBgB,CAACC,EAAeF,EAAWC,IAAW,CACtD,MAAMG,EAAsBC,GAAa,CACvCA,EAAS,QAASC,GAAU,CACbA,EAAM,GAAG,MAAM,OACfJ,EACXI,EAAM,MAAMN,EAAW,GAAGC,CAAM,EAEhCG,EAAmBE,EAAM,SAAS,CAE5C,CAAO,CACP,EAEIF,EAAmBZ,EAAS,MAAM,SAAS,CAC/C,CAOA,CACA"}
{"version":3,"file":"CyExpandableTitle.vue_vue_type_script_setup_true_lang-ad298d48.cjs","sources":["../src/components/expandable-title/CyExpandableTitle.vue?vue&type=script&setup=true&lang.ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, withCtx as _withCtx, withDirectives as _withDirectives, normalizeClass as _normalizeClass, renderSlot as _renderSlot, createTextVNode as _createTextVNode, resolveDynamicComponent as _resolveDynamicComponent, mergeProps as _mergeProps, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"cyw-text-f10\" }\n\nimport {\n  computed,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  ref,\n  useAttrs\n} from \"vue\";\nimport CyTooltip from \"../tooltip/CyTooltip.vue\";\nimport CyShimmer from \"../shimmer/CyShimmer.vue\";\nimport CyButton from \"../button/CyButton.vue\";\nimport Clipboard from \"../../directives/clipboard/index.js\";\nimport { PROPS } from \"./types\";\nimport { generateTestId } from \"../../utilities/bind-attributes\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{\n  name: \"CyExpandableTitle\",\n  directives: {\n    \"cy-clipboard\": Clipboard\n  } as Record<string, any>,\n  inheritAttrs: false\n},\n  __name: 'CyExpandableTitle',\n  props: {\n    tagName: { default: \"span\" },\n    disabled: { type: Boolean, default: false },\n    loading: { type: Boolean, default: false },\n    element: { default: null },\n    valueKey: { default: \"\" },\n    value: { default: \"\" },\n    offset: { default: 100 },\n    hideCopy: { type: Boolean, default: false },\n    tooltipProps: { default: () => ({}) }\n  },\n  emits: [\"resize\"],\n  setup(__props: any, { emit: __emit }) {\n\n\n\nconst emits = __emit;\n\nconst $attrs = useAttrs();\n\n//define refs\nconst wrapperElementRef = ref<HTMLElement | null>(null);\nconst elRef = ref<HTMLElement | null>(null);\n\n//define state\nconst isTruncated = ref<boolean>(false);\nconst isCopied = ref<boolean>(false);\nconst observerInstance = ref<any>();\n\nconst props = __props;\n\nconst isDisabled = computed((): boolean => {\n  return !isTruncated.value || props.disabled;\n});\n\nconst title = computed(() => {\n  if (typeof props.value === \"string\") return props.value;\n  return props.value?.[props.valueKey] || \"NA\";\n});\n\nonBeforeUnmount(() => {\n  if (observerInstance.value && props.element instanceof HTMLElement)\n    observerInstance.value.unobserve(\n      props.element || (props.element as HTMLElement)?.parentElement\n    );\n});\n\nonMounted(() => {\n  nextTick(() => {\n    setWidth();\n  });\n});\n\nfunction copiedText() {\n  isCopied.value = true;\n  setTimeout(() => (isCopied.value = false), 2000);\n}\n\nfunction setWidth() {\n  observerInstance.value = new ResizeObserver((element) => {\n    const wrapperWidth = element[0]?.target?.clientWidth || 0;\n    if (wrapperWidth && wrapperWidth > props.offset && elRef.value) {\n      elRef.value.style.maxWidth = `${wrapperWidth - props.offset}px`;\n      emits(\"resize\");\n    }\n  }).observe(elRef.value?.parentElement as Element);\n}\nfunction getWidth() {\n  if (wrapperElementRef.value) {\n    const { scrollWidth, offsetWidth } = wrapperElementRef.value;\n    isTruncated.value = scrollWidth > offsetWidth;\n  }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _directive_cy_clipboard = _resolveDirective(\"cy-clipboard\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _mergeProps({\n    ref_key: \"elRef\",\n    ref: elRef,\n    class: \"cyw-expandable-title cyw-w-100\"\n  }, {..._unref($attrs), ..._unref(generateTestId)(_unref($attrs), 'expandable') }), [\n    (_ctx.loading)\n      ? (_openBlock(), _createBlock(CyShimmer, {\n          key: 0,\n          type: \"single\",\n          class: \"cyw-w-100 cyw-overflow-hidden cyw-mt-2\",\n          size: 1\n        }))\n      : (_openBlock(), _createBlock(CyTooltip, _mergeProps({\n          key: 1,\n          effect: \"dark\",\n          enterable: true,\n          \"popper-class\": \"cyw-expandable-title__tooltip cyw-text-break\",\n          \"aria-disabled\": isDisabled.value,\n          tabindex: isDisabled.value ? -1 : 0,\n          disabled: isDisabled.value\n        }, { placement: 'bottom', ..._ctx.tooltipProps }), {\n          content: _withCtx(() => [\n            (!_ctx.hideCopy)\n              ? _withDirectives((_openBlock(), _createBlock(CyButton, {\n                  key: 0,\n                  size: \"sm\",\n                  type: \"tertiary\",\n                  subtype: \"subtle\",\n                  \"aria-label\": \"Copy\"\n                }, {\n                  default: _withCtx(() => [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"i\", {\n                      class: \"cyicon-copy cyw-mr-2 cyw-text-f10\",\n                      \"aria-hidden\": true\n                    }, null, -1 /* HOISTED */)),\n                    _createElementVNode(\"span\", _hoisted_1, _toDisplayString(isCopied.value ? \"Copied\" : \"Copy\"), 1 /* TEXT */)\n                  ]),\n                  _: 1 /* STABLE */\n                })), [\n                  [_directive_cy_clipboard, copiedText, \"success\"],\n                  [_directive_cy_clipboard, title.value, \"copy\"]\n                ])\n              : _createCommentVNode(\"v-if\", true),\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([{ 'cyw-border-top cyw-mt-2 cyw-py-3': !_ctx.hideCopy }, \"cyw-word-break-all cyw-text-f12\"])\n            }, _toDisplayString(title.value), 3 /* TEXT, CLASS */)\n          ]),\n          default: _withCtx(() => [\n            (_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.tagName), {\n              class: \"cyw-d-block cyw-text-ellipsis\",\n              ref_key: \"wrapperElementRef\",\n              ref: wrapperElementRef,\n              onMouseover: getWidth\n            }, {\n              default: _withCtx(() => [\n                _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                  _createTextVNode(_toDisplayString(title.value), 1 /* TEXT */)\n                ])\n              ]),\n              _: 3 /* FORWARDED */\n            }, 544 /* NEED_HYDRATION, NEED_PATCH */))\n          ]),\n          _: 3 /* FORWARDED */\n        }, 16 /* FULL_PROPS */, [\"aria-disabled\", \"tabindex\", \"disabled\"]))\n  ], 16 /* FULL_PROPS */))\n}\n}\n\n})"],"names":["_hoisted_1","_sfc_main","_defineComponent","Clipboard","__props","__emit","emits","$attrs","useAttrs","wrapperElementRef","ref","elRef","isTruncated","isCopied","observerInstance","props","isDisabled","computed","title","onBeforeUnmount","onMounted","nextTick","setWidth","copiedText","element","wrapperWidth","getWidth","scrollWidth","offsetWidth","_ctx","_cache","_directive_cy_clipboard","_resolveDirective","_openBlock","_createElementBlock","_mergeProps","_unref","generateTestId","_createBlock","CyShimmer","CyTooltip","_withCtx","_createCommentVNode","_withDirectives","CyButton","_createElementVNode","_toDisplayString","_normalizeClass","_resolveDynamicComponent","_renderSlot","_createTextVNode"],"mappings":"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"}
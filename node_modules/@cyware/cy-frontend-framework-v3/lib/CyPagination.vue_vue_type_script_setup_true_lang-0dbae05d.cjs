"use strict";const e=require("vue"),N=require("./CyDropdown.vue_vue_type_script_setup_true_lang-8460d3a0.cjs"),u=require("./CyButton.vue_vue_type_script_setup_true_lang-33e4d3d7.cjs"),V=require("./components/select-option/CySelectOption.cjs"),d=require("./CyTooltip.vue_vue_type_script_setup_true_lang-f48e6aa4.cjs"),k=require("./prototypes/keyHandler/index.cjs"),r=require("./utilities/bind-attributes.cjs"),S=require("./CyHelpText.vue_vue_type_script_setup_true_lang-ddbd16f8.cjs"),T=["aria-hidden","aria-label"],h=["aria-label","disabled","value"],z=e.defineComponent({name:"CyPagination",inheritAttrs:!1,__name:"CyPagination",props:{total:{default:0},loading:{type:Boolean,default:!1},defaultPageSize:{default:10},helpText:{type:[Function,String],default:""},maxLimit:{default:0},pagination:{default:()=>({pageSize:10,page:1})},disabled:{type:[Boolean,Function],default:!1},dataLabels:{default:()=>({})},config:{default:()=>({showPageSize:!0})}},emits:["pageChange"],setup(m,{expose:y,emit:b}){const w={pagination:"Pagination",previousPage:"Previous Page",nextPage:"Next Page",pageNumber:"Page Number",firstPage:"Go to first page",pageSuffix:"Pages",lastPage:"Go to last page"},c=e.ref(null),v=b,n=m,i=e.reactive({labels:{...w,...n.dataLabels||{}},rendered:!1,isExpanded:!1,isFocused:!1}),f=e.computed(()=>{let t=[25,50,100];return t.unshift(n.defaultPageSize),t.map(a=>({id:a,name:`${a}/page`}))}),_=e.computed(()=>n.total&&!isNaN(n.total)),x=e.computed(()=>p()?n.maxLimit:n.total),s=e.computed(()=>Math.ceil(x.value/(n.pagination.pageSize||1)));function p(t=!1){if(!n.maxLimit)return!1;const a=n.maxLimit<=n.total;return t?C():a}function C(){if(typeof n.helpText=="function"){const t={maxLimit:n.maxLimit,total:n.total};return n.helpText(t)}return n.helpText}function o(t,a=n.pagination.pageSize){const l=a||n.pagination.pageSize||1;n.pagination.page=t,t<=Math.ceil(n.total/l)&&v("pageChange",t,a)}function P(t){if(t.key==="Enter"){const a=parseInt(c.value?.value||"");return a>s.value?o(s.value):a!==0&&o(a||1),!0}return t.keyCode>47&&t.keyCode<=57?!0:(t.preventDefault(),!1)}function g(t){o(1,t)}return y({pageChange:o,sizeChange:g}),(t,a)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({class:[{"cyw-d-none":!_.value},"cyw-pagination cyw-py-1 cyw-px-2 cyw-base-font"],"aria-hidden":n.total<=0,role:"navigation","aria-label":i.labels.pagination},{...t.$attrs||{},...e.unref(r.generateTestId)(t.$attrs,"pagination")}),[n.config?.showPageSize?(e.openBlock(),e.createBlock(N._sfc_main,{key:0,identifier:"id",modelValue:t.pagination.pageSize,"onUpdate:modelValue":a[0]||(a[0]=l=>t.pagination.pageSize=l),"option-class":"cyw-flex-align-center",data:f.value,isValueKey:!0,disabled:t.disabled,onToggle:a[1]||(a[1]=l=>i.isExpanded=l),"onModel:updateValue":g},{"dropdown-link":e.withCtx(()=>[e.createVNode(u._sfc_main,{type:"tertiary",subtype:"subtle",class:"cyw-text-normal cyw-flex-align-center","aria-haspopup":!0,"aria-expanded":i.isExpanded.toString()},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.pagination.pageSize||n.defaultPageSize)+"/page ",1),e.createElementVNode("i",{class:e.normalizeClass(["cyw-ml-2 cyicon-chevron-o-down cyw-pagination-dropdown-icon",{"is-expanded":i.isExpanded}]),"aria-hidden":!0},null,2)]),_:1},8,["aria-expanded"])]),dropdown:e.withCtx(()=>[e.createElementVNode("div",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,l=>(e.openBlock(),e.createBlock(V.default,e.mergeProps({class:["cyw-text-f12",{"cyw-color-P600":t.pagination.pageSize===l.id}]},e.toHandlers(e.unref(k.default)(g,l.id)),{key:l.id,"aria-label":l.name}),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.name),1)]),_:2},1040,["class","aria-label"]))),128))])]),_:1},8,["modelValue","data","disabled"])):e.createCommentVNode("v-if",!0),e.createVNode(d._sfc_main,{content:i.labels.firstPage,placement:"top"},{default:e.withCtx(()=>[e.createVNode(u._sfc_main,e.mergeProps({type:"tertiary",subtype:"subtle",class:"cyw-mr-2",size:"sm","aria-label":i.labels.firstPage,disabled:!!(t.disabled||(n.pagination?.page??0)<=1)},{...e.unref(r.generateTestId)(t.$attrs,"first-page")},{onClick:a[2]||(a[2]=l=>o(1))}),{default:e.withCtx(()=>a[8]||(a[8]=[e.createElementVNode("i",{class:"cyicon-go-to-start"},null,-1)])),_:1},16,["aria-label","disabled"])]),_:1},8,["content"]),e.createVNode(d._sfc_main,{content:i.labels.previousPage,placement:"top"},{default:e.withCtx(()=>[e.createVNode(u._sfc_main,e.mergeProps({type:"tertiary",subtype:"subtle",class:"cyw-mr-3",size:"sm","aria-label":i.labels.previousPage,disabled:!!(t.disabled||(n.pagination?.page??0)<=1)},{...e.unref(r.generateTestId)(t.$attrs,"previous-page")},{onClick:a[3]||(a[3]=l=>o((n.pagination?.page??1)-1))}),{default:e.withCtx(()=>a[9]||(a[9]=[e.createElementVNode("i",{class:"cyicon-chevron-left"},null,-1)])),_:1},16,["aria-label","disabled"])]),_:1},8,["content"]),e.createElementVNode("span",{class:e.normalizeClass(["cyw-pagination__pages cyw-text-f14",{focused:i.isFocused}])},[e.createElementVNode("input",e.mergeProps({ref_key:"inputRef",ref:c,class:"cyw-mr-1",min:1,"aria-label":i.labels.pageNumber,name:"page-number",disabled:!!t.disabled,onKeypress:P,onFocus:a[4]||(a[4]=l=>i.isFocused=!0),onBlur:a[5]||(a[5]=l=>i.isFocused=!1),autocomplete:"off"},{...e.unref(r.generateTestId)(t.$attrs,"page-number-input")},{value:n.pagination.page}),null,16,h),e.createTextVNode(" of "+e.toDisplayString(s.value)+" "+e.toDisplayString(i.labels.pageSuffix)+" ",1),p()?e.renderSlot(t.$slots,"help-text",{key:0},()=>[p(!0).length?(e.openBlock(),e.createBlock(S._sfc_main,{key:0,helpText:p(!0),iconClass:"cyw-lh-normal",class:"cyw-flex-start-center cyw-inline-flex cyw-min-w-auto"},null,8,["helpText"])):e.createCommentVNode("v-if",!0)]):e.createCommentVNode("v-if",!0)],2),e.createVNode(d._sfc_main,{content:i.labels.nextPage,placement:"top"},{default:e.withCtx(()=>[e.createVNode(u._sfc_main,e.mergeProps({type:"tertiary",subtype:"subtle",class:"cyw-ml-3",size:"sm","aria-label":i.labels.nextPage,disabled:!!(t.disabled||n.pagination.page===s.value)},{...e.unref(r.generateTestId)(t.$attrs,"next-page")},{onClick:a[6]||(a[6]=l=>o((n.pagination?.page??0)+1))}),{default:e.withCtx(()=>a[10]||(a[10]=[e.createElementVNode("i",{class:"cyicon-chevron-right"},null,-1)])),_:1},16,["aria-label","disabled"])]),_:1},8,["content"]),e.createVNode(d._sfc_main,{content:i.labels.lastPage,placement:"top"},{default:e.withCtx(()=>[e.createVNode(u._sfc_main,e.mergeProps({type:"tertiary",subtype:"subtle",class:"cyw-ml-2",size:"sm","aria-label":i.labels.lastPage,disabled:!!(t.disabled||n.pagination.page===s.value)},{...e.unref(r.generateTestId)(t.$attrs,"last-page")},{onClick:a[7]||(a[7]=l=>o(s.value))}),{default:e.withCtx(()=>a[11]||(a[11]=[e.createElementVNode("i",{class:"cyicon-go-to-end"},null,-1)])),_:1},16,["aria-label","disabled"])]),_:1},8,["content"])],16,T))}});exports._sfc_main=z;
//# sourceMappingURL=CyPagination.vue_vue_type_script_setup_true_lang-0dbae05d.cjs.map

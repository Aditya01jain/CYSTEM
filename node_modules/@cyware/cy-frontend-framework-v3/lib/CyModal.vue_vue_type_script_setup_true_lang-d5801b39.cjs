"use strict";const e=require("vue"),b=require("./composables/useScrollMixin.cjs"),C=require("./directives/trapfocus/index.cjs"),k=require("./CyButton.vue_vue_type_script_setup_true_lang-33e4d3d7.cjs"),B=require("./CyTooltip.vue_vue_type_script_setup_true_lang-f48e6aa4.cjs"),S=require("./components/modal/variables.cjs"),d=require("./utilities/bind-attributes.cjs"),M=["aria-hidden"],E=["role","cy-modal-key","aria-hidden","aria-label"],x={class:"cyw-modal-panel"},P=["aria-hidden","id","tabindex"],_={class:"cyw-modal-header__icons cyw-m-0"},$=e.defineComponent({name:"CyModal",inheritAttrs:!1,directives:{"cy-trapfocus":C.default},__name:"CyModal",props:{noCloseIcon:{type:Boolean,default:()=>!1},noHeader:{type:Boolean,default:()=>!1},value:{default:!1},backdropClose:{default:!1,type:Boolean},footer:{default:!1},centered:{default:!0,type:Boolean},modalStyle:{default:()=>({}),type:Object},width:{default:"50%",type:String},top:{default:"10rem",type:String},modalType:{default:"md",type:String},title:{default:"",type:String},modalBodyClass:{default:"",type:String},footerClass:{default:"",type:String},headerClass:{default:"",type:String},focusElement:{default:null,type:String},config:{default:()=>({}),type:Object}},emits:["input","open","close"],setup(o,{expose:m,emit:f}){const l=o,n=f,{dynamicAttrs:y,addScrollListener:i,removeScrollListener:c,states:p}=b.useScrollMixin(),t=e.reactive({showModal:!1,modalWidth:"40%",expand:!1}),h=e.computed(()=>t.showModal?l.centered?"50%":l.top:""),s=e.computed(()=>t.showModal?0:-1);e.onMounted(()=>{t.showModal=l.value,t.modalWidth=l.width});function w(){t.showModal=!0,n("input",!0),i(),n("open")}function v(){l.backdropClose&&r()}function r(){t.showModal=!1,t.expand=!1,c(),n("input",!1),n("close")}return e.watch(()=>l.value,a=>{t.showModal=a,a?i():c()}),m({show:w,hide:r}),(a,u)=>{const g=e.resolveDirective("cy-trapfocus");return e.openBlock(),e.createElementBlock("div",e.mergeProps({ref:"modal",class:["cyw-modal cyw-h-100 cyw-w-100 cyw-position-fixed cyw-flex-justify-center",{"cyw-modal--show":t.showModal}]},{...e.unref(d.bindCustomAttributes)(a.$attrs),...e.unref(d.generateTestId)(a.$attrs,"modal")}),[e.createElementVNode("div",{class:e.normalizeClass(["cyw-backdrop",{show:t.showModal}]),"aria-hidden":!t.showModal,onClick:v},null,10,M),e.withDirectives((e.openBlock(),e.createElementBlock("div",e.mergeProps({role:a.$attrs.role||"dialog","aria-modal":"true","cy-modal-key":t.showModal,"aria-hidden":!t.showModal,"aria-label":o.title||a.$attrs["aria-label"],class:["cyw-modal-container cyw-round-lg cyw-position-absolute cyw-shadow-400",{"cyw-modal--show-centered":t.showModal&&o.centered}],style:{width:l.width,top:h.value,...o.modalStyle}},e.unref(y)),[e.createElementVNode("section",x,[o.noHeader?e.createCommentVNode("v-if",!0):(e.openBlock(),e.createElementBlock("header",{key:0,class:e.normalizeClass(["cyw-modal-header cyw-round-top-lg cyw-flex-align-center",o.headerClass])},[e.renderSlot(a.$slots,"modal-header",e.normalizeProps(e.guardReactiveProps({tabindex:s.value})),()=>[e.createElementVNode("h2",e.mergeProps({class:"cyw-modal-header__label cyw-flex-grow-1","aria-hidden":o.noHeader},{...e.unref(d.generateTestId)(a.$attrs,"modal-title")},{id:`heading-${e.unref(p).componentId}`,tabindex:s.value}),[e.renderSlot(a.$slots,"modal-title",e.normalizeProps(e.guardReactiveProps({tabindex:s.value})),()=>[e.createTextVNode(e.toDisplayString(o.title),1)])],16,P),e.createElementVNode("div",_,[e.renderSlot(a.$slots,"modal-icons",e.normalizeProps(e.guardReactiveProps({tabindex:s.value,close:r}))),o.noCloseIcon?e.createCommentVNode("v-if",!0):(e.openBlock(),e.createBlock(k._sfc_main,e.mergeProps({key:0},{...o.config.closeBtnProps,...e.unref(d.generateTestId)(a.$attrs,"modal-close")},{tabindex:s.value,class:"cyw-py-0",type:"tertiary",subtype:"icon","aria-label":"close","data-testaction":`slider-${t.showModal?"close":"open"}`,onClick:r}),{default:e.withCtx(()=>[e.createVNode(B._sfc_main,{content:e.unref(S.DATA_LABELS).close,placement:"top"},{default:e.withCtx(()=>u[0]||(u[0]=[e.createElementVNode("span",{class:"cyicon-cross cyw-color-N700"},null,-1)])),_:1},8,["content"])]),_:1},16,["tabindex","data-testaction"]))])])],2)),e.createElementVNode("section",{class:e.normalizeClass(["cyw-modal-content",o.modalBodyClass])},[e.renderSlot(a.$slots,"modal-content",e.normalizeProps(e.guardReactiveProps({tabindex:s.value,visible:t.showModal})))],2)]),o.footer?(e.openBlock(),e.createElementBlock("footer",{key:0,class:e.normalizeClass(["cyw-modal-footer cyw-h-100",o.footerClass])},[e.renderSlot(a.$slots,"modal-footer",{tabindex:s.value})],2)):e.createCommentVNode("v-if",!0)],16,E)),[[g,{focusFirst:o.focusElement,modalBodyElement:!0}]])],16)}}});exports._sfc_main=$;
//# sourceMappingURL=CyModal.vue_vue_type_script_setup_true_lang-d5801b39.cjs.map
